"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_projectInstall_newProject_tsx"],{"./app/utils/slugify.tsx":(t,e,a)=>{function r(t){return t.normalize("NFKD").toLowerCase().replace(" ","-").replace(/[^a-z0-9-_]/g,"")}a.d(e,{Z:()=>r})},"./app/views/projectInstall/newProject.tsx":(t,e,a)=>{a.r(e),a.d(e,{default:()=>J});var r=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=a("./app/components/sentryDocumentTitle.tsx"),o=a("./app/styles/space.tsx"),i=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(a("../node_modules/core-js/modules/es.array.push.js"),a("../node_modules/react/index.js")),l=a("../node_modules/react-router/es/index.js"),p=a("../node_modules/@sentry/core/esm/exports.js"),c=a("../node_modules/platformicons/build/index.js"),m=a("./app/actionCreators/modal.tsx"),d=a("./app/components/alert.tsx"),u=a("./app/components/button.tsx"),h=a("./app/components/input.tsx"),g=a("./app/components/layouts/thirds.tsx"),x=a("./app/components/links/externalLink.tsx"),f=a("./app/components/platformPicker.tsx"),Z=a("./app/components/teamSelector.tsx"),y=a("./app/data/platformCategories.tsx"),j=a("./app/icons/index.tsx"),w=a("./app/locale.tsx"),b=a("./app/stores/projectsStore.tsx"),C=a("./app/utils/analytics.tsx"),v=a("./app/utils/getPlatformName.tsx"),P=a("./app/utils/routeAnalytics/withRouteAnalytics.tsx"),N=a("./app/utils/slugify.tsx"),_=a("./app/utils/withApi.tsx"),S=a("./app/utils/withDomainRequired.tsx"),D=a("./app/utils/withOrganization.tsx"),F=a("./app/utils/withSentryRouter.tsx"),k=a("./app/utils/getDisplayName.tsx"),z=a("./app/utils/useTeams.tsx"),T=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");var $=a("./app/views/projectInstall/issueAlertOptions.tsx");class q extends n.Component{constructor(t,e){super(t,e),(0,i.Z)(this,"createProject",(async t=>{t.preventDefault();const{organization:e,api:a}=this.props,{projectName:r,platform:s,team:o,dataFragment:i}=this.state,{slug:n}=e,{shouldCreateCustomRule:c,name:m,conditions:d,actions:u,actionMatch:h,frequency:g,defaultRules:x}=i||{};this.setState({inFlight:!0}),r||p.$e((t=>{t.setExtra("props",this.props),t.setExtra("state",this.state),p.uT("No project name")}));try{const t=await a.requestPromise(`/teams/${n}/${o}/projects/`,{method:"POST",data:{name:r,platform:s,default_rules:x??!0}});let i;c&&(i=(await a.requestPromise(`/projects/${e.slug}/${t.slug}/rules/`,{method:"POST",data:{name:m,conditions:d,actions:u,actionMatch:h,frequency:g}})).id),(0,C.Gi)("project_creation_page.created",{organization:e,issue_alert:x?"Default":c?"Custom":"No Rule",project_id:t.id,rule_id:i||""}),b.Z.onCreateSuccess(t,e.slug);const p=s||"other";l.browserHistory.push((0,S.D)(`/${e.slug}/${t.slug}/getting-started/${p}/`))}catch(t){this.setState({inFlight:!1,error:t.responseJSON.detail}),403!==t.status&&409!==t.status&&p.$e((e=>{e.setExtra("err",t),e.setExtra("props",this.props),e.setExtra("state",this.state),p.uT("Project creation failed")}))}})),(0,i.Z)(this,"setPlatform",(t=>{t?this.setState((e=>{let{projectName:a,platform:r}=e;const s=a&&a!==r?a:t;return{platform:t,projectName:(0,N.Z)(s)}})):this.setState({platform:null,projectName:""})}));const{teams:a,location:r}=t,{query:s}=r,o=a.filter((t=>t.hasAccess)),n=s.team||o.length&&o[0].slug,c=(0,v.Z)(s.platform)?s.platform:"";this.state={error:!1,projectName:(0,v.Z)(c)||"",team:n,platform:c,inFlight:!1,dataFragment:void 0}}componentDidMount(){this.props.setEventNames("project_creation_page.viewed","Project Create: Creation page viewed")}get defaultCategory(){const{query:t}=this.props.location;return e=t.category,y.ZP.find((t=>{let{id:a}=t;return a===e}))?.id;var e}renderProjectForm(){const{organization:t}=this.props,{projectName:e,platform:a,team:r}=this.state,s=(0,T.BX)(R,{onSubmit:this.createProject,children:[(0,T.BX)("div",{children:[(0,T.tZ)(X,{children:(0,w.t)("Project name")}),(0,T.BX)(A,{children:[(0,T.tZ)(M,{platform:a??"",size:20}),(0,T.tZ)(E,{type:"text",name:"name",placeholder:(0,w.t)("project-name"),autoComplete:"off",value:e,onChange:t=>this.setState({projectName:(0,N.Z)(t.target.value)})})]})]}),(0,T.BX)("div",{children:[(0,T.tZ)(X,{children:(0,w.t)("Team")}),(0,T.BX)(O,{children:[(0,T.tZ)(Z.Z,{name:"select-team",menuPlacement:"auto",clearable:!1,value:r,placeholder:(0,w.t)("Select a Team"),onChange:t=>this.setState({team:t.value}),teamFilter:t=>t.hasAccess}),(0,T.tZ)(u.zx,{borderless:!0,"data-test-id":"create-team",icon:(0,T.tZ)(j.N_,{isCircled:!0}),onClick:()=>(0,m.openCreateTeamModal)({organization:t,onClose:t=>{let{slug:e}=t;return this.setState({team:e})}}),title:(0,w.t)("Create a team"),"aria-label":(0,w.t)("Create a team")})]})]}),(0,T.tZ)("div",{children:(0,T.tZ)(u.zx,{type:"submit","data-test-id":"create-project",priority:"primary",disabled:!this.canSubmitForm,children:(0,w.t)("Create Project")})})]});return(0,T.BX)(n.Fragment,{children:[(0,T.tZ)(g.Dx,{withMargins:!0,children:(0,w.t)("3. Name your project and assign it a team")}),s]})}get canSubmitForm(){const{projectName:t,team:e,inFlight:a}=this.state,{shouldCreateCustomRule:r,conditions:s}=this.state.dataFragment||{};return!a&&e&&""!==t&&(!r||s?.every?.((t=>t.value)))}render(){const{platform:t,error:e}=this.state;return(0,T.BX)(n.Fragment,{children:[e&&(0,T.tZ)(d.bZ,{type:"error",children:e}),(0,T.BX)("div",{"data-test-id":"onboarding-info",children:[(0,T.tZ)(g.Dx,{withMargins:!0,children:(0,w.t)("Create a new project in 3 steps")}),(0,T.tZ)(L,{children:(0,w._N)("Set up a separate project for each part of your application (for example, your API server and frontend client), to quickly pinpoint which part of your application errors are coming from. [link: Read the docs].",{link:(0,T.tZ)(x.Z,{href:"https://docs.sentry.io/product/sentry-basics/integrate-frontend/create-new-project/"})})}),(0,T.tZ)(g.Dx,{withMargins:!0,children:(0,w.t)("1. Choose your platform")}),(0,T.tZ)(f.Z,{platform:t,defaultCategory:this.defaultCategory,setPlatform:t=>this.setPlatform(t?.id??null),organization:this.props.organization,showOther:!0}),(0,T.tZ)($.ZP,{onChange:t=>{this.setState({dataFragment:t})}}),this.renderProjectForm()]})]})}}q.displayName="CreateProject";const B=(0,P.Z)((0,_.Z)((0,F.Z)((0,D.Z)((t=>{function e(e){const{teams:a}=(0,z.y)();return(0,T.tZ)(t,{teams:a,...e})}return e.displayName=`withTeams(${(0,k.Z)(t)})`,e})(q))))),R=(0,r.Z)("form",{target:"e84eeos6"})("display:grid;grid-template-columns:300px minmax(250px, max-content) max-content;gap:",(0,o.D)(2),";align-items:end;padding:",(0,o.D)(3)," 0;box-shadow:0 -1px 0 rgba(0, 0, 0, 0.1);background:",(t=>t.theme.background),";"),X=(0,r.Z)("div",{target:"e84eeos5"})("font-size:",(t=>t.theme.fontSizeExtraLarge),";margin-bottom:",(0,o.D)(1),";"),A=(0,r.Z)("div",{target:"e84eeos4"})({name:"bjn8wh",styles:"position:relative"}),E=(0,r.Z)(h.Z,{target:"e84eeos3"})("padding-left:calc(",(t=>t.theme.formPadding.md.paddingLeft),"px * 1.5 + 20px);"),M=(0,r.Z)(c.v,{target:"e84eeos2"})("position:absolute;top:50%;left:",(t=>t.theme.formPadding.md.paddingLeft),"px;transform:translateY(-50%);"),O=(0,r.Z)("div",{target:"e84eeos1"})("display:grid;gap:",(0,o.D)(1),";grid-template-columns:1fr min-content;align-items:center;"),L=(0,r.Z)("p",{target:"e84eeos0"})("color:",(t=>t.theme.subText),";max-width:760px;");function I(){return(0,T.tZ)(s.Z,{children:(0,T.tZ)(G,{children:(0,T.tZ)("div",{className:"container",children:(0,T.tZ)(H,{children:(0,T.tZ)(B,{})})})})})}I.displayName="NewProject";const G=(0,r.Z)("div",{target:"e1ltwwy41"})("flex:1;background:",(t=>t.theme.background),";"),H=(0,r.Z)("div",{target:"e1ltwwy40"})("margin-top:",(0,o.D)(3),";"),J=I}}]);
//# sourceMappingURL=../sourcemaps/app_views_projectInstall_newProject_tsx.34d211c00208bd4fcd13b0067b45aece.js.map