"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_starfish_modules_APIModule_endpointTable_tsx"],{"./app/views/starfish/modules/APIModule/endpointTable.tsx":(e,t,n)=>{n.d(t,{Dq:()=>b,WJ:()=>f,ZP:()=>g,_F:()=>_,xe:()=>x});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/es.array.push.js"),n("../node_modules/@tanstack/react-query/build/lib/useQuery.mjs")),a=n("../node_modules/moment/moment.js"),r=n.n(a),o=n("./app/components/duration.tsx"),d=n("./app/components/gridEditable/index.tsx"),l=n("./app/components/links/link.tsx"),u=n("./app/constants/chartPalette.tsx"),p=n("./app/views/starfish/components/sparkline.tsx"),m=n("./app/views/starfish/utils/constants.tsx"),c=n("./app/views/starfish/utils/useSpansQuery.tsx"),h=n("./app/views/starfish/utils/zeroFillSeries.tsx"),y=n("./app/views/starfish/modules/APIModule/queries.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const k=[{key:"description",name:"URL",width:600},{key:"throughput",name:"throughput",width:200},{key:"p50_trend",name:"p50 Trend",width:200},{key:"p50(span.self_time)",name:"p50",width:d.z7},{key:"count_unique(user)",name:"Users",width:d.z7},{key:"count_unique(transaction)",name:"Transactions",width:d.z7},{key:"sum(span.self_time)",name:"Total Time",width:d.z7}];function g(e){let{location:t,onSelect:n,filterOptions:i,columns:a}=e;const{isLoading:o,data:l}=(0,c.bB)({queryString:(0,y.an)(i),eventView:(0,y.g9)(i),initialData:[]}),{isLoading:u,data:p}=(0,s.a)({queryKey:["endpointAggregates",i],queryFn:()=>fetch(`${m.M}/?query=${(0,y.jD)(i)}`).then((e=>e.json())),retry:!1,initialData:[]}),g={};p.forEach((e=>{let{description:t,interval:n,count:i,p50:s}=e;t in g?g[t].push({name:n,count:i,p50:s}):g[t]=[{name:n,count:i,p50:s}]}));const _=l.map((e=>{const t=e.description,n={seriesName:"throughput",data:g[t]?.map((e=>{let{name:t,count:n}=e;return{name:t,value:n}}))},i={seriesName:"p50 Trend",data:g[t]?.map((e=>{let{name:t,p50:n}=e;return{name:t,value:n}}))},s=(0,h.b)(n,r().duration(12,"hours")),a=(0,h.b)(i,r().duration(12,"hours"));return{...e,throughput:s,p50_trend:a}}));return(0,w.tZ)(d.ZP,{isLoading:o||u,data:_,columnOrder:a??k,columnSortBy:[],grid:{renderHeadCell:f,renderBodyCell:(e,t)=>Z(e,t,n)},location:t})}function f(e){return"throughput"===e.key||"p50_trend"===e.key?(0,w.tZ)(x,{children:(0,w.tZ)(_,{children:e.name})}):e.key.toString().match(/^p\d\d/)||!["description","transaction"].includes(e.key.toString())?(0,w.tZ)(b,{children:(0,w.tZ)(_,{children:e.name})}):(0,w.tZ)(_,{children:e.name})}function Z(e,t,n){if("description"===e.key&&n)return(0,w.tZ)(_,{children:(0,w.tZ)(l.Z,{onClick:()=>n(t),to:"",children:t[e.key]})});if("throughput"===e.key)return(0,w.tZ)(p.Z,{color:u.$[3][0],series:t[e.key],width:e.width?e.width-e.width/5:void 0});if("p50_trend"===e.key)return(0,w.tZ)(p.Z,{color:u.$[3][3],series:t[e.key],width:e.width?e.width-e.width/5:void 0});let i=null;return i=e.key.toString().match(/^p\d\d/)||"sum(span.self_time)"===e.key?(0,w.tZ)(o.Z,{seconds:t[e.key]/1e3,fixedDigits:2,abbreviation:!0}):(["description","transaction"].includes(e.key.toString()),(0,w.tZ)(_,{children:t[e.key]})),e.key.toString().match(/^p\d\d/)||e.key.toString().match(/^.*\(.*\)/)?(0,w.tZ)(b,{children:i}):(0,w.tZ)(x,{children:i})}g.displayName="EndpointTable",f.displayName="renderHeadCell",Z.displayName="renderBodyCell";const _=(0,i.Z)("span",{target:"e6m90oa2"})({name:"12wal98",styles:"text-overflow:ellipsis;overflow:hidden;white-space:nowrap"}),b=(0,i.Z)("span",{target:"e6m90oa1"})({name:"evqzij",styles:"text-align:right;width:100%"}),x=(0,i.Z)("span",{target:"e6m90oa0"})({name:"zq26zb",styles:"text-align:left;width:100%"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_starfish_modules_APIModule_endpointTable_tsx.1b833366f17e92f213fe3ad8ee4cb855.js.map