"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_performance_searchBar_tsx-app_views_performance_landing_utils_tsx-app_views_pe-e5f306"],{"./app/components/performance/searchBar.tsx":(e,t,r)=>{r.d(t,{D:()=>L,Z:()=>_});var n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/es.array.push.js"),r("../node_modules/core-js/modules/es.error.cause.js"),r("../node_modules/react/index.js")),s=r("../node_modules/react-router/es/index.js"),a=r("../node_modules/lodash/debounce.js"),i=r.n(a),l=r("./app/components/searchBar.tsx"),c=r("./app/components/smartSearchBar/utils.tsx"),p=r("./app/constants/index.tsx"),u=r("./app/locale.tsx"),d=r("./app/utils/discover/genericDiscoverQuery.tsx"),m=r("./app/utils/tokenizeSearch.tsx"),h=r("./app/utils/useApi.tsx"),f=r("./app/utils/useOnClickOutside.tsx"),g=r("./app/utils/withDomainRequired.tsx"),y=r("./app/views/performance/transactionSummary/utils.tsx"),A=r("./app/components/smartSearchBar/searchDropdown.tsx"),R=r("./app/components/smartSearchBar/types.tsx"),E=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function x(e){const{organization:t,eventView:r,onSearch:n,query:a}=e,[x,_]=(0,o.useState)([]),S=x[0]?.children?.length||0,[O,w]=(0,o.useState)(-1),[F,D]=(0,o.useState)(!1),b=()=>D(!1),[Z,j]=(0,o.useState)(!1),[I,k]=(0,o.useState)(a),$=(0,o.useRef)(null);(0,f.Z)($,(0,o.useCallback)(b,[]));const T=(0,h.Z)(),M=r.clone(),N=`/organizations/${t.slug}/events/`,q=M.project?.map(String),B=(0,o.useCallback)(i()((async e=>{try{j(!0);const t=new m.MY("");t.addFilterValues("transaction",[L(e)],!1),t.addFilterValues("event.type",["transaction"]),Object.keys(T.activeRequests).length&&T.clear();const[r]=await(0,d.AA)(T,N,{field:["transaction","project_id","count()"],project:q,sort:"-count()",query:t.formatString(),statsPeriod:M.statsPeriod,referrer:"api.performance.transaction-name-search-bar"}),n=r.data.reduce(((e,t)=>(e.children.push({value:C(t),title:t.transaction,type:R.q.LINK,desc:""}),e)),{title:"All Transactions",children:[],icon:null,type:"header"});w(-1),_([n])}catch(e){throw new Error("Unable to fetch event field values")}finally{j(!1)}}),p.Dk,{leading:!0}),[T,N,M.statsPeriod,q.join(",")]),G=e=>{const t=v(e);V(t.transaction,!1)},V=(e,t)=>{_([]),k(e),e=new m.MY(e).formatString(),n(e?t?e:`transaction:"${e}"`:""),b()};return(0,E.BX)(P,{"data-test-id":"transaction-search-bar",ref:$,children:[(0,E.tZ)(l.Z,{placeholder:(0,u.t)("Search Transactions"),onChange:e=>{if(k(e),0===e.length&&n(""),e.length<3)return _([]),void b();D(!0),B(e)},onKeyDown:e=>{const{key:t}=e;if(!Z)if("Escape"===t&&F)b();else{if(("ArrowUp"===t||"ArrowDown"===t)&&F&&S>0){const e=x[0].children[O],r=(O+S+("ArrowUp"===t?-1:1))%S;w(r);const n=x[0].children[r];let o=x;return e&&(o=(0,c.$l)(x,e,!1)),n&&(o=(0,c.$l)(o,n,!0)),void _(o)}if("Enter"===t){e.preventDefault();const t=x[0]?.children[O];t?.value?G(t.value):V(I,!0)}}},query:I}),F&&(0,E.tZ)(A.Z,{maxMenuHeight:300,searchSubstring:I,loading:Z,items:x,onClick:G,onIconClick:e=>{(e=>{const{transaction:r,project_id:n}=e,o=M.generateQueryStringObject();_([]);const a=(0,y.e1)({orgSlug:t.slug,transaction:r,projectID:String(n),query:o});s.browserHistory.push((0,g.D)(a))})(v(e))}})]})}x.displayName="SearchBar";const C=e=>`${e.transaction}:${e.project_id}`,v=e=>{const t=e.lastIndexOf(":");return{project_id:parseInt(e.slice(t+1),10),transaction:e.slice(0,t)}},L=e=>(e.startsWith("*")||(e="*"+e),e.endsWith("*")||(e+="*"),e),P=(0,n.Z)("div",{target:"efn8czs0"})({name:"bjn8wh",styles:"position:relative"}),_=x},"./app/views/performance/landing/utils.tsx":(e,t,r)=>{r.d(t,{BY:()=>f,Cf:()=>A,Lx:()=>g,NJ:()=>x,Oo:()=>C,Q_:()=>E,TT:()=>R,ZR:()=>L,hv:()=>v,kP:()=>y}),r("../node_modules/core-js/modules/es.array.push.js");var n=r("../node_modules/react-router/es/index.js"),o=r("../node_modules/lodash/omit.js"),s=r.n(o),a=r("./app/locale.tsx"),i=r("./app/utils/analytics.tsx"),l=r("./app/utils/formatters.tsx"),c=r("./app/utils/queryString.tsx"),p=r("./app/utils/tokenizeSearch.tsx"),u=r("./app/views/performance/data.tsx"),d=r("./app/views/performance/utils.tsx");const m="left",h="right";let f;!function(e){e.ALL="all",e.FRONTEND_PAGELOAD="frontend_pageload",e.FRONTEND_OTHER="frontend_other",e.BACKEND="backend",e.MOBILE="mobile"}(f||(f={}));const g=[{label:(0,a.t)("All Transactions"),field:f.ALL},{label:(0,a.t)("Web Vitals"),field:f.FRONTEND_PAGELOAD},{label:(0,a.t)("Frontend"),field:f.FRONTEND_OTHER},{label:(0,a.t)("Backend"),field:f.BACKEND},{label:(0,a.t)("Mobile"),field:f.MOBILE}];function y(e,t){const{eventView:r,location:o}=t,s=new p.MY(r.query);s.addFilterValues("!transaction",[`${e}`]),n.browserHistory.push({pathname:o.pathname,query:{...o.query,cursor:void 0,query:s.formatString()}})}function A(e){const t=(0,c.ro)(e?.query?.landingDisplay);return g.find((e=>{let{field:r}=e;return r===t}))}function R(e,t){const r=C(e,t);return g.find((e=>{let{field:t}=e;return t===r}))||g[0]}function E(e,t,r){return A(e)||R(t,r)}function x(e,t,r,o,a){const l=(0,c.ro)(t.query.query,""),u=new p.MY(l);u.removeFilter("transaction.op");const d={...s()(t.query,["landingDisplay","sort"]),query:u.formatString()};delete d[m],delete d[h];const f=C(r,a),g=E(t,r,a).field,y=f===e?{...d}:{...d,landingDisplay:e};(0,i.Gi)("performance_views.landingv3.display_change",{organization:o,change_to_display:e,default_display:f,current_display:g,is_default:f===g}),n.browserHistory.push({pathname:t.pathname,query:y})}function C(e,t){if(!t)return f.ALL;const r=t.project;return{[d.iy.ANY]:f.ALL,[d.iy.FRONTEND]:f.FRONTEND_PAGELOAD,[d.iy.BACKEND]:f.BACKEND,[d.iy.MOBILE]:f.MOBILE}[(0,d.Bh)(e,r)]??f.ALL}const v=e=>({"p75(transaction.duration)":{title:(0,a.t)("Duration (p75)"),tooltip:(0,u.$r)(e,u.V$.P75),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"tpm()":{title:(0,a.t)("Throughput"),tooltip:(0,u.$r)(e,u.V$.THROUGHPUT),formatter:l.Du},"failure_rate()":{title:(0,a.t)("Failure Rate"),tooltip:(0,u.$r)(e,u.V$.FAILURE_RATE),formatter:e=>(0,l.rl)(e,2)},"apdex()":{title:(0,a.t)("Apdex"),tooltip:(0,u.$r)(e,u.V$.APDEX),formatter:e=>(0,l.$1)(e,4)},"p75(measurements.frames_slow_rate)":{title:(0,a.t)("Slow Frames (p75)"),tooltip:(0,u.$r)(e,u.V$.SLOW_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.frames_frozen_rate)":{title:(0,a.t)("Frozen Frames (p75)"),tooltip:(0,u.$r)(e,u.V$.FROZEN_FRAMES),formatter:e=>(0,l.rl)(e,2)},"p75(measurements.app_start_cold)":{title:(0,a.t)("Cold Start (p75)"),tooltip:(0,u.$r)(e,u.V$.APP_START_COLD),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,a.t)("Warm Start (p75)"),tooltip:(0,u.$r)(e,u.V$.APP_START_WARM),formatter:e=>(0,l.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,a.t)("Stall Percentage (p75)"),tooltip:(0,u.$r)(e,u.V$.STALL_PERCENTAGE),formatter:e=>(0,l.rl)(e,2)}});function L(e){return Boolean(e.getFields().find((e=>e.includes("measurements.stall_percentage"))))}},"./app/views/performance/vitalDetail/utils.tsx":(e,t,r)=>{r.d(t,{EX:()=>w,MN:()=>h,Np:()=>y,SP:()=>f,Uy:()=>E,Ve:()=>x,W0:()=>_,a7:()=>P,cD:()=>O,eE:()=>m,fL:()=>g,i4:()=>A,iF:()=>R,il:()=>L,jo:()=>v,q4:()=>C,vk:()=>S});var n=r("./app/components/charts/components/markLine.tsx"),o=r("./app/components/charts/utils.tsx"),s=r("./app/icons/index.tsx"),a=r("./app/locale.tsx"),i=r("./app/utils/discover/charts.tsx"),l=r("./app/utils/discover/fields.tsx"),c=r("./app/utils/fields/index.ts"),p=r("./app/utils/performance/vitals/constants.tsx"),u=r("./app/utils/queryString.tsx"),d=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const m={[c.Zl.FP]:3e3,[c.Zl.FCP]:3e3,[c.Zl.LCP]:4e3,[c.Zl.FID]:300,[c.Zl.CLS]:.25},h={[c.Zl.FP]:1e3,[c.Zl.FCP]:1e3,[c.Zl.LCP]:2500,[c.Zl.FID]:100,[c.Zl.CLS]:.1};let f;!function(e){e.POOR="Poor",e.MEH="Meh",e.GOOD="Good"}(f||(f={}));const g={[f.POOR]:"red300",[f.MEH]:"yellow300",[f.GOOD]:"green300"},y={[f.POOR]:(0,d.tZ)(s.pY,{color:g[f.POOR]}),[f.MEH]:(0,d.tZ)(s.tC,{color:g[f.MEH]}),[f.GOOD]:(0,d.tZ)(s.O1,{color:g[f.GOOD]})};function A(e){let{orgSlug:t,vitalName:r,projectID:n,query:o}=e;const s=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/vitaldetail/`}({orgSlug:t});return{pathname:s,query:{vitalName:r,project:n,environment:o.environment,statsPeriod:o.statsPeriod,start:o.start,end:o.end,query:o.query}}}function R(e){const t=(0,u.ro)(e.query.vitalName);return Object.values(c.Zl).find((e=>e===t))||c.Zl.LCP}function E(e){return e===c.Zl.CLS?(0,a.t)("CLS p75"):(0,a.t)("Duration p75")}function x(e){const t=m[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}function C(e){const t=h[e];return`compare_numeric_aggregate(${(0,l.LY)(`p75(${e})`)},greater,${t})`}const v={[c.Zl.FCP]:(0,a.t)("First Contentful Paint"),[c.Zl.CLS]:(0,a.t)("Cumulative Layout Shift"),[c.Zl.FID]:(0,a.t)("First Input Delay"),[c.Zl.LCP]:(0,a.t)("Largest Contentful Paint")},L={[c.Zl.FCP]:(0,a.t)("First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks. At the moment, there is support for FCP in the following browsers:"),[c.Zl.CLS]:(0,a.t)("Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts. At the moment, there is support for CLS in the following browsers:"),[c.Zl.FID]:(0,a.t)("First Input Delay (FID) measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not. At the moment, there is support for FID in the following browsers:"),[c.Zl.LCP]:(0,a.t)("Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. Itâ€™s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page. At the moment, there is support for LCP in the following browsers:")},P={[c.Zl.FCP]:"FCP",[c.Zl.CLS]:"CLS",[c.Zl.FID]:"FID",[c.Zl.LCP]:"LCP"},_={[c.Zl.FCP]:"custom",[c.Zl.CLS]:"cls",[c.Zl.FID]:"fid",[c.Zl.LCP]:"lcp"};function S(e){let t=-1/0;for(const{data:r}of e)for(const e of r)t=Math.max(t,e.value);return t}const O={[c.Zl.LCP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FID]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI,p.AR.IE],[c.Zl.CLS]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA],[c.Zl.FCP]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI],[c.Zl.TTFB]:[p.AR.CHROME,p.AR.EDGE,p.AR.OPERA,p.AR.FIREFOX,p.AR.SAFARI,p.AR.IE]};function w(e){let{theme:t,location:r,vital:s,yAxis:p}=e;const d="false"!==(0,u.ro)(r.query.utc),f=m[s],g=h[s];return{vitalPoor:f,vitalMeh:g,legend:{right:10,top:0,selected:(0,o.RI)(r)},chartOptions:{grid:{left:"5px",right:"10px",top:"35px",bottom:"0px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",valueFormatter:(e,t)=>(0,i.CX)(e,(0,l.Px)(s===c.Zl.CLS?t:p))},yAxis:{min:0,max:f,axisLabel:{color:t.chartLabel,showMaxLabel:!1,formatter:e=>(0,i.gu)(e,(0,l.Px)(p))}}},markLines:[{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.red300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,a.t)("Poor")},data:[{yAxis:f}]})},{seriesName:"Thresholds",type:"line",data:[],markLine:(0,n.Z)({silent:!0,lineStyle:{color:t.yellow300,type:"dashed",width:1.5},label:{show:!0,position:"insideEndTop",formatter:(0,a.t)("Meh")},data:[{yAxis:g}]})}],utc:d}}}}]);
//# sourceMappingURL=../sourcemaps/app_components_performance_searchBar_tsx-app_views_performance_landing_utils_tsx-app_views_pe-e5f306.2a1e2737d8121f2a6b84b7ba7dbf08ad.js.map