<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Defining instrument classes &mdash; srsgui  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Writing a task script" href="create-task.html" />
    <link rel="prev" title="Creating a project" href="create-project.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> srsgui
          </a>
              <div class="version">
                0.2.16
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="create-project.html">Creating a project</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Defining instrument classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#available-interfaces">Available_interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#component-commands-and-indexcommands">Component, Commands and IndexCommands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="create-task.html">Writing a task script</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Example project</a></li>
<li class="toctree-l1"><a class="reference internal" href="srsgui.html">srsgui APIs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">srsgui</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Defining instrument classes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/define-instrument.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="defining-instrument-classes">
<h1>Defining instrument classes<a class="headerlink" href="#defining-instrument-classes" title="Permalink to this heading"></a></h1>
<p>an instrument class is a subclass derived from the
<a class="reference internal" href="srsgui.inst.html#srsgui.inst.instrument.Instrument" title="srsgui.inst.instrument.Instrument"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instrument</span></code></a> class.
Minimum requirement is to have <strong>_IdString</strong> to check if a connected
instrument is a correct instrument  that can be used with the class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">srsgui</span> <span class="kn">import</span> <span class="n">Instrument</span>
<span class="k">class</span> <span class="nc">CG635</span><span class="p">(</span><span class="n">Instrument</span><span class="p">):</span>
    <span class="n">_IdString</span> <span class="o">=</span> <span class="s1">&#39;CG635&#39;</span>
    <span class="n">_term_char</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span>  <span class="c1"># Add this line if the carriage return is the termination character</span>
                        <span class="c1"># of the instrument, instead of the line feed (ASCII: 0x10, b&#39;\n&#39;).</span>
</pre></div>
</div>
<dl class="simple">
<dt>If the instrument has:</dt><dd><ol class="arabic simple">
<li><p>the <strong>*IDN?</strong> remote command</p></li>
<li><p>either RS232 serial communication or Ethernet TCPIP communication port available,</p></li>
</ol>
</dd>
</dl>
<p>the instrument can be connected and used in task scripts and in the terminal,
with 4 lines of definition like above. If it does not have the *IDN? remote command,
<a class="reference internal" href="srsgui.inst.html#srsgui.inst.instrument.Instrument.check_id" title="srsgui.inst.instrument.Instrument.check_id"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_id()</span></code></a> method in Instrument
class needs to be reimplemented.</p>
<section id="available-interfaces">
<h2>Available_interfaces<a class="headerlink" href="#available-interfaces" title="Permalink to this heading"></a></h2>
<p><cite>Available_interface</cite> defines what kind of communication is available for the instrument,
the base <a class="reference internal" href="srsgui.inst.html#srsgui.inst.instrument.Instrument" title="srsgui.inst.instrument.Instrument"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instrument</span></code></a> class has the following
definition for serial and TCPIP communication interfaces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">available_interfaces</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>   <span class="n">SerialInterface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">FindListInput</span><span class="p">(),</span>
            <span class="s1">&#39;baud_rate&#39;</span><span class="p">:</span> <span class="n">IntegerListInput</span><span class="p">([</span><span class="mi">9600</span><span class="p">,</span> <span class="mi">115200</span><span class="p">]),</span>
            <span class="s1">&#39;hardware_flow_control&#39;</span><span class="p">:</span> <span class="n">BoolInput</span><span class="p">([</span><span class="s1">&#39;Off&#39;</span><span class="p">,</span> <span class="s1">&#39;On&#39;</span><span class="p">])</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="p">[</span>   <span class="n">TcpipInterface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;ip_address&#39;</span><span class="p">:</span> <span class="n">Ip4Input</span><span class="p">(</span><span class="s1">&#39;192.168.1.10&#39;</span><span class="p">),</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">IntegerInput</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>If your instrument needs other than serial and TCPIP interfaces, <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> allows to add
other communication classes derived from
<code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code> class.
Currently there are two external communication interfaces are available from
<a class="reference external" href="https://pypi.org/project/srsinst.sr860/">srsinst.sr860</a> package: <code class="docutils literal notranslate"><span class="pre">Vxi11Interface</span></code> and <code class="docutils literal notranslate"><span class="pre">VisaInterface</span></code>,
which covers for <a class="reference external" href="https://www.lxistandard.org/About/VXI-11-and-LXI.aspx">VXI11</a>, <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE-488">GPIB</a> and <a class="reference external" href="https://www.testandmeasurementtips.com/remote-communication-with-usbtmc-faq/">USB-TMC</a>. You can import the interface modules
from <a class="reference external" href="https://pypi.org/project/srsinst.sr860/">srsinst.sr860</a> .</p>
<p>Available_interfaces in SSR865 class is define as following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">available_interfaces</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span>   <span class="n">Vxi11Interface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;ip_address&#39;</span><span class="p">:</span> <span class="n">Ip4Input</span><span class="p">(</span><span class="s1">&#39;192.168.1.10&#39;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="p">[</span>   <span class="n">VisaInterface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;resource&#39;</span><span class="p">:</span> <span class="n">FindListInput</span><span class="p">(),</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="p">[</span>   <span class="n">TcpipInterface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;ip_address&#39;</span><span class="p">:</span> <span class="n">Ip4Input</span><span class="p">(</span><span class="s1">&#39;192.168.1.10&#39;</span><span class="p">),</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">23</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="p">[</span>   <span class="n">SerialInterface</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">FindListInput</span><span class="p">(),</span>
            <span class="s1">&#39;baud_rate&#39;</span><span class="p">:</span> <span class="n">IntegerListInput</span><span class="p">([</span><span class="mi">9600</span><span class="p">,</span> <span class="mi">19200</span><span class="p">,</span> <span class="mi">38400</span><span class="p">,</span> <span class="mi">115200</span><span class="p">,</span>
                                           <span class="mi">230400</span><span class="p">,</span> <span class="mi">460800</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">],</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The definition of available_interfaces is all you need to do to get a customized
dialog box opened for the instrument in <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application.</p>
<figure class="align-center">
<img alt="_images/connect-dialog-box-capture.png" src="_images/connect-dialog-box-capture.png" />
</figure>
<p>For <code class="docutils literal notranslate"><span class="pre">VisaInterface</span></code>, you have to get <a class="reference external" href="https://pyvisa.readthedocs.io/en/latest/">PyVISA</a> working before running <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application.
It involves installation of the PyVISA package and its backend library.
Refer to <a class="reference external" href="https://pyvisa.readthedocs.io/en/latest/">PyVISA</a> documentation for installation detail.</p>
<p>From Python interpreter, you can connect and use a instrument, once its <code class="docutils literal notranslate"><span class="pre">Instrument</span></code> class is defined.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">srsgui</span><span class="o">&gt;</span><span class="n">python</span>
<span class="n">Python</span> <span class="mf">3.8.3</span> <span class="p">(</span><span class="n">tags</span><span class="o">/</span><span class="n">v3</span><span class="mf">.8.3</span><span class="p">:</span><span class="mi">6</span><span class="n">f8c832</span><span class="p">,</span> <span class="n">May</span> <span class="mi">13</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span><span class="mi">37</span><span class="p">:</span><span class="mi">02</span><span class="p">)</span> <span class="p">[</span><span class="n">MSC</span> <span class="n">v</span><span class="mf">.1924</span> <span class="mi">64</span> <span class="n">bit</span> <span class="p">(</span><span class="n">AMD64</span><span class="p">)]</span> <span class="n">on</span> <span class="n">win32</span>
<span class="n">Type</span> <span class="s2">&quot;help&quot;</span><span class="p">,</span> <span class="s2">&quot;copyright&quot;</span><span class="p">,</span> <span class="s2">&quot;credits&quot;</span> <span class="ow">or</span> <span class="s2">&quot;license&quot;</span> <span class="k">for</span> <span class="n">more</span> <span class="n">information</span><span class="o">.</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">srsinst.sr860</span> <span class="kn">import</span> <span class="n">SR860</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">srsgui</span> <span class="kn">import</span> <span class="n">SerialInte</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">SerialInterface</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;COM3&#39;</span><span class="p">,</span> <span class="s1">&#39;COM4&#39;</span><span class="p">,</span> <span class="s1">&#39;COM256&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lia</span> <span class="o">=</span> <span class="n">SR860</span><span class="p">(</span><span class="s1">&#39;serial&#39;</span><span class="p">,</span><span class="s1">&#39;COM4&#39;</span><span class="p">,</span><span class="mi">115200</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lia</span><span class="o">.</span><span class="n">query_text</span><span class="p">(</span><span class="s1">&#39;*idn?&#39;</span><span class="p">)</span>
<span class="s1">&#39;Stanford_Research_Systems,SR865A,002725,v1.34&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lia</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">srsinst.sr860</span> <span class="kn">import</span> <span class="n">VisaInterface</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">VisaInterface</span><span class="o">.</span><span class="n">find</span><span class="p">()</span>
<span class="p">[</span><span class="s1">&#39;USB0::0xB506::0x2000::002725::INSTR&#39;</span><span class="p">,</span> <span class="s1">&#39;GPIB0::4::INSTR&#39;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lia</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;visa&#39;</span><span class="p">,</span> <span class="s1">&#39;USB0::0xB506::0x2000::002725::INSTR&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">lia</span><span class="o">.</span><span class="n">query_text</span><span class="p">(</span><span class="s1">&#39;*idn?&#39;</span><span class="p">)</span>
<span class="s1">&#39;Stanford_Research_Systems,SR865A,002725,v1.34</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="o">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Well, these operations are what you can do with <a class="reference external" href="https://pyvisa.readthedocs.io/en/latest/">PyVISA</a> itself. Defining an instrument class,
adding it in a .taskconfig file, and opening it in <code class="docutils literal notranslate"><span class="pre">srsgui</span></code> application let you
use the terminal to interact with multiple instrument at once, and use high level <code class="docutils literal notranslate"><span class="pre">Instrument</span></code>
class attributes and methods.</p>
<p>Below is an image of terminal captured with the example project opened.
As you can see, you can interact with the clock generator and oscilloscope in many ways.
There are two commands for osc: *idn?, sara? used, and two commands for cg:
*idn?, freq(?) used in the terminal.</p>
<figure class="align-center">
<img alt="_images/terminal-with-example.png" src="_images/terminal-with-example.png" />
</figure>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="component-commands-and-indexcommands">
<h2>Component, Commands and IndexCommands<a class="headerlink" href="#component-commands-and-indexcommands" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="srsgui.inst.html#srsgui.inst.instrument.Instrument" title="srsgui.inst.instrument.Instrument"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instrument</span></code></a> class uses
<a class="reference internal" href="srsgui.inst.html#srsgui.inst.component.Component" title="srsgui.inst.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> class,
<a class="reference internal" href="srsgui.inst.html#module-srsgui.inst.commands" title="srsgui.inst.commands"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Command</span></code></a> classes and
<a class="reference internal" href="srsgui.inst.html#module-srsgui.inst.indexcommands" title="srsgui.inst.indexcommands"><code class="xref py py-mod docutils literal notranslate"><span class="pre">IndexCommand</span></code></a> classes
to organize the functionality of an instrument.</p>
<p>If you have to deal with hundreds of remote commands to use an instrument remotely,
organizing them in a manageable way is crucial. <a class="reference external" href="https://pypi.org/project/srsinst.sr860/">Srsinst.sr860</a> package shows how these
convenience classes are used to organize a large set of remote commands.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="create-project.html" class="btn btn-neutral float-left" title="Creating a project" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="create-task.html" class="btn btn-neutral float-right" title="Writing a task script" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chulhoon Kim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>