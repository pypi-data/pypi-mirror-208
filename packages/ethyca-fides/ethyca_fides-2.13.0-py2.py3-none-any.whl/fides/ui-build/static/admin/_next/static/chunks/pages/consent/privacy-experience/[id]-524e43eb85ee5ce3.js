(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2357],{24487:function(e,r,n){"use strict";n.d(r,{At:function(){return f},aG:function(){return v},gN:function(){return b}});var t=n(32393),i=n(14007),a=n(49031),c=n(27378);function s(){return s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(this,arguments)}function o(e,r){if(null==e)return{};var n,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}var l=["spacing"],u=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],p=["children","spacing","separator","className"],m=(0,t.Gp)((function(e,r){var n=e.spacing,i=o(e,l),a=s({mx:n},(0,t.yK)().separator);return c.createElement(t.m$.span,s({ref:r,role:"presentation"},i,{__css:a}))}));i.Ts&&(m.displayName="BreadcrumbSeparator");var f=(0,t.Gp)((function(e,r){var n=e.isCurrentPage,a=e.as,l=e.className,d=e.href,p=o(e,u),m=(0,t.yK)(),f=s({ref:r,as:a,className:(0,i.cx)("chakra-breadcrumb__link",l)},p);return n?c.createElement(t.m$.span,s({"aria-current":"page",__css:m.link},f)):c.createElement(t.m$.a,s({__css:m.link,href:d},f))}));i.Ts&&(f.displayName="BreadcrumbLink");var b=(0,t.Gp)((function(e,r){var n=e.isCurrentPage,l=e.separator,u=e.isLastChild,p=e.spacing,b=e.children,v=e.className,y=o(e,d),h=(0,a.WR)(b).map((function(e){return e.type===f?c.cloneElement(e,{isCurrentPage:n}):e.type===m?c.cloneElement(e,{spacing:p,children:e.props.children||l}):e})),j=s({display:"inline-flex",alignItems:"center"},(0,t.yK)().item),g=(0,i.cx)("chakra-breadcrumb__list-item",v);return c.createElement(t.m$.li,s({ref:r,className:g},y,{__css:j}),h,!u&&c.createElement(m,{spacing:p},l))}));i.Ts&&(b.displayName="BreadcrumbItem");var v=(0,t.Gp)((function(e,r){var n=(0,t.jC)("Breadcrumb",e),l=(0,t.Lr)(e),u=l.children,d=l.spacing,m=void 0===d?"0.5rem":d,f=l.separator,b=void 0===f?"/":f,v=l.className,y=o(l,p),h=(0,a.WR)(u),j=h.length,g=h.map((function(e,r){return c.cloneElement(e,{separator:b,spacing:m,isLastChild:j===r+1})})),x=(0,i.cx)("chakra-breadcrumb",v);return c.createElement(t.m$.nav,s({ref:r,"aria-label":"breadcrumb",className:x,__css:n.container},y),c.createElement(t.Fo,{value:n},c.createElement(t.m$.ol,{className:"chakra-breadcrumb__list"},g)))}));i.Ts&&(v.displayName="Breadcrumb")},30794:function(e,r,n){"use strict";n.d(r,{SD:function(){return f},Sn:function(){return u},Vp:function(){return l}});var t=n(13018),i=n(32393),a=n(14007),c=n(27378);function s(){return s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s.apply(this,arguments)}var o=["isDisabled","children"],l=(0,i.Gp)((function(e,r){var n=(0,i.jC)("Tag",e),t=(0,i.Lr)(e),a=s({display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%"},n.container);return c.createElement(i.Fo,{value:n},c.createElement(i.m$.span,s({ref:r},t,{__css:a})))}));a.Ts&&(l.displayName="Tag");var u=(0,i.Gp)((function(e,r){var n=(0,i.yK)();return c.createElement(i.m$.span,s({ref:r,isTruncated:!0},e,{__css:n.label}))}));a.Ts&&(u.displayName="TagLabel");var d=(0,i.Gp)((function(e,r){return c.createElement(t.JO,s({ref:r,verticalAlign:"top",marginEnd:"0.5rem"},e))}));a.Ts&&(d.displayName="TagLeftIcon");var p=(0,i.Gp)((function(e,r){return c.createElement(t.JO,s({ref:r,verticalAlign:"top",marginStart:"0.5rem"},e))}));a.Ts&&(p.displayName="TagRightIcon");var m=function(e){return c.createElement(t.JO,s({verticalAlign:"inherit",viewBox:"0 0 512 512"},e),c.createElement("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}))};a.Ts&&(m.displayName="TagCloseIcon");var f=function(e){var r=e.isDisabled,n=e.children,t=function(e,r){if(null==e)return{};var n,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(i[n]=e[n]);return i}(e,o),a=s({display:"flex",alignItems:"center",justifyContent:"center",outline:"0"},(0,i.yK)().closeButton);return c.createElement(i.m$.button,s({"aria-label":"close"},t,{type:"button",disabled:r,__css:a}),n||c.createElement(m,null))};a.Ts&&(f.displayName="TagCloseButton")},51471:function(e,r,n){"use strict";n.d(r,{Z:function(){return v}});var t=n(34896),i=n(88038),a=n.n(i),c=n(86677),s=(n(27378),n(90768)),o=n(35100),l=n(64989),u=n(48114),d=n(51365),p=n(29549),m=n(60709),f=n(24246),b=function(){var e=(0,c.useRouter)();return(0,f.jsx)(t.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,f.jsxs)(t.xu,{children:[(0,f.jsxs)(t.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,f.jsx)(t.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,f.jsx)(p.zx,{size:"sm",variant:"outline",onClick:function(){e.push(m.fz)},children:"Configure"})]}),(0,f.jsxs)(t.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},v=function(e){var r=e.children,n=e.title,i=(0,s.hz)(),p=(0,c.useRouter)(),m="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,v=!(i.flags.privacyRequestsConfiguration&&m),y=(0,d.JE)(void 0,{skip:v}).data,h=(0,d.PW)(void 0,{skip:v}).data,j=i.flags.privacyRequestsConfiguration&&(!y||!h)&&m;return(0,f.jsxs)(t.kC,{"data-testid":n,direction:"column",children:[(0,f.jsxs)(a(),{children:[(0,f.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,f.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,f.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,f.jsx)(o.Z,{}),(0,f.jsx)(u.Z,{}),(0,f.jsxs)(t.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,f.jsx)(t.xu,{flex:0,flexShrink:0,children:(0,f.jsx)(l.U,{})}),(0,f.jsxs)(t.kC,{direction:"column",flex:1,minWidth:0,children:[j?(0,f.jsx)(b,{}):null,r]})]})]})}},86054:function(e,r,n){"use strict";var t=n(90849),i=n(90089),a=n(34896),c=n(24246),s=["title","children"];function o(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?o(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}r.Z=function(e){var r=e.title,n=e.children,t=(0,i.Z)(e,s);return(0,c.jsxs)(a.xu,l(l({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},t),{},{children:[(0,c.jsx)(a.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:r}),(0,c.jsx)(a.Kq,{p:6,spacing:6,children:n})]}))}},24753:function(e,r,n){"use strict";n.d(r,{MA:function(){return u},Vo:function(){return p},t5:function(){return d}});var t=n(90849),i=n(34896),a=n(24246);function c(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(Object(n),!0).forEach((function(r){(0,t.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var o=function(e){var r=e.message;return(0,a.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,a.jsx)("strong",{children:"Success:"})," ",r]})},l=function(e){var r=e.message;return(0,a.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,a.jsx)("strong",{children:"Error:"})," ",r]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var r=(0,a.jsx)(o,{message:e});return s(s({},u),{description:r})},p=function(e){var r=(0,a.jsx)(l,{message:e});return s(s({},u),{description:r,status:"error"})}},38229:function(e,r,n){"use strict";n.d(r,{J:function(){return t}});var t=new Map([["overlay","Overlay"],["privacy_center","Privacy center"]])},31712:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return U}});var t=n(9198),i=n(34896),a=n(83125),c=n(24487),s=n(79894),o=n.n(s),l=n(86677),u=n(51471),d=n(60709),p=n(38229),m=n(90849),f=n(90089),b=n(55732),v=n(97865),y=n(34707),h=n.n(y),j=n(70409),g=n(30794),x=n(29549),O=n(71292),_=n(27378),P=n(86054),w=n(78624),k=n(24753),E=n(49841),N=n(43139),C=n(24246),Z=function(e){var r=e.hasOnlyNoticeOnlyNotices;return e.isOverlay?(0,C.jsxs)(P.Z,{title:"Banner actions","data-testid":"banner-action-form",children:[(0,C.jsx)(N.j0,{name:"link_label",label:"Link label",variant:"stacked",isRequired:!0}),r?(0,C.jsx)(N.j0,{label:"Acknowledgment button label",name:"acknowledgement_button_label",variant:"stacked",isRequired:!0}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.j0,{label:"Confirmation button label",name:"confirmation_button_label",variant:"stacked",isRequired:!0}),(0,C.jsx)(N.j0,{label:"Reject button label",name:"reject_button_label",variant:"stacked",isRequired:!0})]})]}):null},R=function(e){return e.isOverlay?(0,C.jsxs)(P.Z,{title:"Banner text","data-testid":"banner-text-form",children:[(0,C.jsx)(N.j0,{name:"banner_title",label:"Banner title",variant:"stacked",isRequired:!0}),(0,C.jsx)(N.Ks,{label:"Banner description",name:"banner_description",variant:"stacked"})]}):null},S=n(21023);function D(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function q(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?D(Object(n),!0).forEach((function(r){(0,m.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var T=(0,w.MM)(S.hd).map((function(e){return q(q({},e),{},{label:"".concat(e.label.charAt(0).toUpperCase()).concat(e.label.slice(1))})})),L=function(e){var r=e.needsBanner,n=e.isOverlay,t=(0,O.u6)().setFieldValue;return(0,_.useEffect)((function(){r&&t("delivery_mechanism",S.hd.BANNER)}),[r,t]),n?(0,C.jsx)(P.Z,{title:"Delivery mechanism","data-testid":"delivery-mechanism-form",children:(0,C.jsx)(N.AP,{name:"delivery_mechanism",label:"Choose your delivery mechanism",options:T,variant:"stacked",isDisabled:r})}):null},A=n(68301),B=["created_at","updated_at","privacy_experience_history_id","privacy_experience_template_id","version","privacy_notices"];function z(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function I(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){(0,m.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var M={regions:[],component:S.re.OVERLAY,delivery_mechanism:S.hd.LINK},G=A.Ry().shape({link_label:A.Z_().required().label("Link label"),component_description:A.Z_()}),J=A.Ry().shape({banner_title:A.Z_().required().label("Banner title"),banner_description:A.Z_(),link_label:A.Z_().required().label("Link label")}),K=A.Ry().shape({confirmation_button_label:A.Z_().required().label("Confirmation button label"),reject_button_label:A.Z_().required().label("Reject button label")}),$=A.Ry().shape({acknowledgement_button_label:A.Z_().required().label("Acknowledgment button label")}),V=function(e){return e.isOverlay?null:(0,C.jsxs)(P.Z,{title:"Privacy center messaging","data-testid":"privacy-center-messaging-form",children:[(0,C.jsx)(N.j0,{name:"link_label",label:"Website link text",variant:"stacked",isRequired:!0}),(0,C.jsx)(N.j0,{name:"component_description",label:"Privacy center heading text",variant:"stacked"})]})},W=["validationSchema"];function F(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function Y(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?F(Object(n),!0).forEach((function(r){(0,m.Z)(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var X=function(e){var r=e.privacyExperience,n=(0,l.useRouter)(),t=(0,j.pm)(),a=r?function(e){var r,n,t;return e.created_at,e.updated_at,e.privacy_experience_history_id,e.privacy_experience_template_id,e.version,e.privacy_notices,I(I({},(0,f.Z)(e,B)),{},{regions:null!==(r=e.regions)&&void 0!==r?r:M.regions,component:null!==(n=e.component)&&void 0!==n?n:M.component,delivery_mechanism:null!==(t=e.delivery_mechanism)&&void 0!==t?t:M.delivery_mechanism})}(r):M,c=(0,E.Mu)(),s=(0,v.Z)(c,1)[0],o=(0,E.sS)(),u=(0,v.Z)(o,1)[0],p=(0,_.useMemo)((function(){return!!r}),[r]),m=function(){var e=(0,b.Z)(h().mark((function e(r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,s([r]);case 3:i=e.sent,e.next=9;break;case 6:return e.next=8,u([r]);case 8:i=e.sent;case 9:(0,w.D4)(i)?t((0,k.Vo)((0,w.e$)(i.error))):(t((0,k.t5)("Privacy experience ".concat(p?"updated":"created"))),p||n.push(d.w0));case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),y=r?r.privacy_notices:void 0,N=function(e){var r=e.privacyExperience,n=e.privacyNotices,t=(0,_.useMemo)((function(){return r.component===S.re.OVERLAY}),[r.component]),i=(0,_.useMemo)((function(){return!!n&&n.some((function(e){return e.consent_mechanism===S.J7.OPT_IN||e.consent_mechanism===S.J7.NOTICE_ONLY}))}),[n]),a=(0,_.useMemo)((function(){return!!n&&n.length>0&&n.every((function(e){return e.consent_mechanism===S.J7.NOTICE_ONLY}))}),[n]),c=(0,_.useMemo)((function(){if(!t)return G;var e=a?$:K;return J.concat(e)}),[t,a]);return{isOverlay:t,needsBanner:i,hasOnlyNoticeOnlyNotices:a,validationSchema:c}}({privacyExperience:a,privacyNotices:y}),D=N.validationSchema,q=(0,f.Z)(N,W);return(0,C.jsx)(O.J9,{initialValues:a,enableReinitialize:!0,onSubmit:m,validationSchema:D,children:function(e){var r=e.dirty,t=e.isValid,c=e.isSubmitting;return(0,C.jsx)(O.l0,{children:(0,C.jsxs)(i.Kq,{spacing:10,children:[(0,C.jsxs)(i.Kq,{spacing:6,children:[(0,C.jsx)(P.Z,{title:"Locations",children:(0,C.jsx)(i.xu,{border:"1px solid",borderColor:"gray.200",borderRadius:"md",p:5,m:0,children:a.regions.map((function(e){return(0,C.jsx)(g.Vp,{mr:"2",backgroundColor:"primary.400",color:"white",children:e},e)}))})}),(0,C.jsx)(L,Y({},q)),(0,C.jsx)(V,Y({},q)),(0,C.jsx)(R,Y({},q)),(0,C.jsx)(Z,Y({},q))]}),(0,C.jsxs)(x.hE,{size:"sm",spacing:2,children:[(0,C.jsx)(x.zx,{variant:"outline",onClick:function(){n.back()},children:"Cancel"}),(0,C.jsx)(x.zx,{type:"submit",variant:"primary",size:"sm",isDisabled:c||!r||!t,isLoading:c,"data-testid":"save-btn",children:"Save"})]})]})})}})},U=function(){var e,r=(0,l.useRouter)(),n="";r.query.id&&(n=Array.isArray(r.query.id)?r.query.id[0]:r.query.id);var s=(0,E.QF)(n),m=s.data;if(s.isLoading)return(0,C.jsx)(u.Z,{title:"Privacy experience",children:(0,C.jsx)(i.M5,{children:(0,C.jsx)(a.$,{})})});if(!m)return(0,C.jsx)(u.Z,{title:"Privacy experience",children:(0,C.jsxs)(i.xv,{children:["No privacy experience with id ",n," found."]})});var f=m.component===S.re.OVERLAY?"Configure your consent overlay":"Configure your privacy center";return(0,C.jsxs)(u.Z,{title:"Privacy experience ".concat(m.component),children:[(0,C.jsxs)(i.xu,{mb:4,children:[(0,C.jsx)(i.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:f}),(0,C.jsx)(i.xu,{children:(0,C.jsxs)(c.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,C.jsx)(c.gN,{children:(0,C.jsx)(o(),{href:t.Jw,children:"Privacy requests"})}),(0,C.jsx)(c.gN,{children:(0,C.jsx)(o(),{href:d.w0,children:"Privacy experience"})}),(0,C.jsx)(c.gN,{color:"complimentary.500",children:(0,C.jsx)(o(),{href:"#",children:null!==(e=p.J.get(m.component||""))&&void 0!==e?e:m.component})})]})})]}),(0,C.jsxs)(i.xu,{width:{base:"100%",lg:"70%"},children:[(0,C.jsx)(i.xv,{fontSize:"sm",mb:8,children:"Configure the text of your privacy overlay, privacy banner, and the text of the buttons which users will click to accept, reject, manage, and save their preferences. This privacy overlay contains opt-in privacy notices and must be delivered with a banner."}),(0,C.jsx)(i.xu,{"data-testid":"privacy-experience-detail-page",children:(0,C.jsx)(X,{privacyExperience:m})})]})]})}},5123:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/privacy-experience/[id]",function(){return n(31712)}])}},function(e){e.O(0,[2141,5527,8301,9,9774,2888,179],(function(){return r=5123,e(e.s=r);var r}));var r=e.O();_N_E=r}]);