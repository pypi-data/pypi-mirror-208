# Options for Tox itself, and other tools {{{

[tox]
envlist = linter, py3{9,10,11,12}
isolated_build = True
skip_missing_interpreters = True
skipsdist = True

# Options for the flake8 linter (and vim-flake8).
# E741 (ambiguous variable name): "l" is used for lightness a lot.
[flake8]
extend-ignore = E741
exclude = .git,.tox,__pycache__,build,dist


# }}}
# Test environments {{{

[testenv]
description = run tests using pytest
deps =
    pytest >= 7,<8
skip_install = True
setenv =
    PYTHONDONTWRITEBYTECODE=1
commands =
    {posargs:pytest --showlocals --doctest-modules -- tests}


[testenv:linter]
description = run the flake8 linter
deps =
    flake8 >= 6,<7
commands =
    {posargs:flake8 -- colorsysx tests}


[testenv:pydoc]
description = run pydoc on {posargs}
deps =
passenv = TERM
commands =
    python -m pydoc {posargs}


# }}}
