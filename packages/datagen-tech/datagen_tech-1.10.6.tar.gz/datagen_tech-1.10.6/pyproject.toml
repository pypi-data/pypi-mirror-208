[tool.poetry]
name = "datagen-tech"
version = "1.10.6"
description = "Datagen SDK"
readme = "README.md"
authors = ["Datagen Technologies Ltd."]
packages = [{ include = "datagen", from ="src"}]
repository = "https://gitlab.com/datagen1/core/sdk"

[tool.poetry.dependencies]
python = "^3.8"
dependency-injector = ">4.6"
marshmallow-dataclass = ">=6"
marshmallow-enum = ">=1.5"
numpy  = [
    { "version" = "^1.20", python = ">=3.8,<3.9" },
    { "version" = "^1.20", python = ">=3.9" }
]
opencv-python = "^4.4"
pydantic = "^1.9"
dynaconf = "^2.2.3"
importlib-metadata = "<5.0.0"
pandas = "^1.1"
scipy = [
    { "version" = "^1.5", python = "<3.9",  optional = true },
    { "version" = "^1.9", python = "^3.9",  optional = true }
]
requests = "^2.28.1"
appdirs = "^1.4"
datagen-protocol-functional = "0.31.0"
aiohttp = "^3.8"
aiofiles = "^23.1.0"
asyncio-channel = "^0.9.1"
nest-asyncio = "^1.5.6"

[tool.poetry.group.dev.dependencies]
#datagen-protocol-functional = {path = "../datagen-protocol/projects/functional", develop=true}
pytest = ">=6"
pytest-asyncio = "^0.20.3"
pytest-cov = ">=4.0.0"
pytest-durations = ">=1.2.0"
isort = ">=5.12.0"

[tool.poetry.extras]
camera-utils = ["scipy"]


[[tool.poetry.source]]
name = "datagen-gitlab-pypi"
url = "https://gitlab.com/api/v4/groups/datagen1/-/packages/pypi/simple"
default = false
secondary = true


[tool.pytest.ini_options]
minversion = "6.0"
addopts = "-ra -q --durations=10 -v"
testpaths = [
    "/tests/unit/"
]
pythonpath = [
    ".", "src",
]
markers = [
    "integration" # integration tests
]


[tool.black]
line-length = 120
target-version = ['py310']
include = '\.pyi?$'
exclude = '''

(
  /(
      \.eggs         # exclude a few common directories in the
    | \.git          # root of the project
    | \.hg
    | \.mypy_cache
    | \.tox
    | \.venv
    | _build
    | buck-out
    | build
    | dist
  )/

)
'''

[tool.isort]
line_length = 120
profile = "black"


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"
