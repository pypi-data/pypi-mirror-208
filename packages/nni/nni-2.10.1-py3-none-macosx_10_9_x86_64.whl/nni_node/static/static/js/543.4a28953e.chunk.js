"use strict";(self.webpackChunknni_webui=self.webpackChunknni_webui||[]).push([[543],{25118:function(e,t,n){var i=n(16449),r=n(4512),o=n.n(r),a=n(22379),s=n(93272),c=n(63700),l=n(41772);t.Z=e=>{const{value:t,hideTooltip:n}=e,r=(0,i.useRef)(null);return i.createElement("div",null,i.createElement(a.h,{iconProps:{iconName:"Copy"},styles:{icon:[{fontSize:s.TS.small}]},onClick:e=>{e.stopPropagation(),o()(t),r.current&&r.current.show(),setTimeout((()=>{null!==r.current&&r.current.dismiss()}),1e3)},onMouseDown:e=>{e.stopPropagation()},onMouseUp:e=>{e.stopPropagation()}}),i.createElement(c.G,{hidden:n,content:"Copied",componentRef:r,delay:0,tooltipProps:l.$8}))}},36766:function(e,t,n){n.d(t,{Z:function(){return S}});var i=n(16449),r=n(87578),o=n(34487),a=n(39863),s=n(40487),c=n(12220),l=n(4512),m=n.n(l),d=n(31820),u=n(41772),p=n(30965),h=n(4671);var y=e=>{const{logStr:t,logName:n}=e,r=t.toLowerCase().startsWith("http");return i.createElement("div",{className:"logpath"},i.createElement("span",{className:"logName"},n),r?i.createElement("a",{className:"link",rel:"noopener noreferrer",href:t,target:"_blank"},t):i.createElement("span",{className:"fontColor333"},t))};var g=e=>{const{logStr:t}=e,n=-1!==t.indexOf(",");return i.createElement("div",null,n?i.createElement("div",null,i.createElement(y,{logStr:t.split(",")[0],logName:"Trial stdout:"}),i.createElement(y,{logStr:t.split(",")[1],logName:"Log on NFS:"})):i.createElement(y,{logStr:t,logName:"Trial stdout:"}))},f=n(39564),v=n(73269),E=n(84244);n(47865);class k extends i.Component{constructor(e){super(e),this.state={panelInnerHeight:window.innerHeight}}setLogPanelHeight=()=>{this.setState((()=>({panelInnerHeight:window.innerHeight,innerWidth:window.innerWidth})))};async componentDidMount(){window.addEventListener("resize",this.setLogPanelHeight)}componentWillUnmount(){window.removeEventListener("resize",this.setLogPanelHeight)}render(){const{hideConfigPanel:e,panelName:t,panelContent:n}=this.props,{panelInnerHeight:o}=this.state,a=(0,h.yG)(o);return i.createElement(r.K,null,i.createElement(v.s,{isOpen:!0,hasCloseButton:!1,isFooterAtBottom:!0,isLightDismiss:!0,onLightDismissClick:e},i.createElement("div",{className:"panel"},i.createElement("div",null,i.createElement("div",{className:"panelName"},t),i.createElement(E.ZP,{height:a,language:"json",theme:"vs-light",value:n,options:{minimap:{enabled:!1},readOnly:!0,automaticLayout:!0,wordWrap:"on"}})),i.createElement(s.K,{text:"Close",className:"configClose",onClick:e}))))}}var b=k;n(18394);var S=e=>{const[t,n]=(0,i.useState)(""),[l,v]=(0,i.useState)(""),[E,k]=(0,i.useState)(!0),[S,C]=(0,i.useState)(!1),N=e.trialId,x=p.F.getTrial(N),T=x.info.logPath||"This trial's log path is not available.",w=x.parameter,_=u.qp in w,P=()=>{k(!0)},D=(e,t)=>{n(t),v(e),k(!1),setTimeout(P,2e3)},B=t=>{window.open(`${u.zU}/trial-file/${e.trialId}/${t}`)};return i.createElement(r.K,{className:"openRow"},i.createElement(r.K,{className:"openRowContent"},i.createElement(o.o,null,i.createElement(a.M,{headerText:"Parameters",key:"1",itemIcon:"TestParameter"},void 0!==x.info.hyperParameters?i.createElement(r.K,{className:"description"},i.createElement(r.K,{className:"bgHyper"},i.createElement(d.Z,{hideRoot:!0,shouldExpandNode:()=>!0,getItemString:()=>null,data:(0,h.cJ)(w)})),i.createElement(r.K,{horizontal:!0,className:"copy"},i.createElement(s.K,{onClick:(e=>{const t=JSON.stringify((0,h.cJ)(e.parameter),null,4);m()(t)?D("Successfully copy parameters to clipboard in form of python dict !","success"):D("Failed !","error")}).bind(void 0,x),text:"Copy as json",styles:{root:{width:128,marginRight:10}}}),_&&i.createElement(c.a,{onClick:()=>{C(!0)},text:"Original parameters"}),!E&&i.createElement(f.Z,{typeInfo:t,info:l}),S&&i.createElement(b,{hideConfigPanel:()=>{C(!1)},panelName:"Retiarii parameters",panelContent:JSON.stringify(w,null,2)}))):i.createElement(r.K,{className:"logpath"},i.createElement("span",{className:"logName"},"Error: "),i.createElement("span",{className:"error"},"This trial's parameters are not available.'"))),i.createElement(a.M,{headerText:"Log",key:"2",itemIcon:"M365InvoicingLogo"},"local"!==p.O.trainingServicePlatform?i.createElement(g,{logStr:T}):i.createElement("div",null,i.createElement(y,{logStr:T,logName:"LogPath:"}),i.createElement("div",{className:"copy",style:{marginTop:4}},i.createElement(s.K,{onClick:B.bind(void 0,"trial.log"),text:"View trial log"}),i.createElement(s.K,{onClick:B.bind(void 0,"stderr"),text:"View trial error",styles:{root:{marginLeft:15}}}),i.createElement(s.K,{onClick:B.bind(void 0,"stdout"),text:"View trial stdout",styles:{root:{marginLeft:15}}})))),p.O.metadata.tag.includes("retiarii")?i.createElement(a.M,{headerText:"Visualization",key:"3",itemIcon:"FlowChart"},i.createElement("div",{id:"visualization"},i.createElement("div",{id:"visualizationText"},"Visualize models with 3rd-party tools."),i.createElement(s.K,{onClick:(()=>{window.open(`/netron/index.html?url=${u.zU}/trial-file/${e.trialId}/model.onnx`)}).bind(void 0),text:"Netron",styles:{root:{marginLeft:15}}}))):null)))}},25984:function(e,t,n){var i=n(16449),r=n(41772),o=n(63700),a=n(45546);t.Z=e=>{const{value:t}=e,n=String(t).length;return i.createElement(i.Fragment,null,n>=15?i.createElement("div",null,i.createElement(o.G,{content:t,directionalHint:a.b.bottomLeftEdge,tooltipProps:r.$8},i.createElement("div",{className:"ellipsis"},t))):i.createElement("div",null,t))}},34543:function(e,t,n){n.r(t),n.d(t,{BestMetricContext:function(){return Te},default:function(){return _e}});var i,r=n(16449),o=n(87578),a=n(12220),s=n(89623),c=n(87735),l=n(30965),m=n(92724),d=n(66133),u=n(93272),p={root:"ms-ScrollablePane",contentContainer:"ms-ScrollablePane--contentContainer"},h=n(21511),y=n(71471),g=n(91905),f=n(51606),v=n(24191),E=n(35386),k=n(77703),b="auto",S=r.createContext({scrollablePane:void 0}),C=(0,y.y)(),N=function(e){function t(t){var n=e.call(this,t)||this;return n._root=r.createRef(),n._stickyAboveRef=r.createRef(),n._stickyBelowRef=r.createRef(),n._contentContainer=r.createRef(),n.subscribe=function(e){n._subscribers.add(e)},n.unsubscribe=function(e){n._subscribers.delete(e)},n.addSticky=function(e){n._stickies.add(e),n.contentContainer&&(e.setDistanceFromTop(n.contentContainer),n.sortSticky(e))},n.removeSticky=function(e){n._stickies.delete(e),n._removeStickyFromContainers(e),n.notifySubscribers()},n.sortSticky=function(e,t){n.stickyAbove&&n.stickyBelow&&(t&&n._removeStickyFromContainers(e),e.canStickyTop&&e.stickyContentTop&&n._addToStickyContainer(e,n.stickyAbove,e.stickyContentTop),e.canStickyBottom&&e.stickyContentBottom&&n._addToStickyContainer(e,n.stickyBelow,e.stickyContentBottom))},n.updateStickyRefHeights=function(){var e=n._stickies,t=0,i=0;e.forEach((function(e){var r=e.state,o=r.isStickyTop,a=r.isStickyBottom;e.nonStickyContent&&(o&&(t+=e.nonStickyContent.offsetHeight),a&&(i+=e.nonStickyContent.offsetHeight),n._checkStickyStatus(e))})),n.setState({stickyTopHeight:t,stickyBottomHeight:i})},n.notifySubscribers=function(){n.contentContainer&&n._subscribers.forEach((function(e){e(n.contentContainer,n.stickyBelow)}))},n.getScrollPosition=function(){return n.contentContainer?n.contentContainer.scrollTop:0},n.syncScrollSticky=function(e){e&&n.contentContainer&&e.syncScroll(n.contentContainer)},n._getScrollablePaneContext=function(){return{scrollablePane:{subscribe:n.subscribe,unsubscribe:n.unsubscribe,addSticky:n.addSticky,removeSticky:n.removeSticky,updateStickyRefHeights:n.updateStickyRefHeights,sortSticky:n.sortSticky,notifySubscribers:n.notifySubscribers,syncScrollSticky:n.syncScrollSticky}}},n._addToStickyContainer=function(e,t,i){if(t.children.length){if(!t.contains(i)){var r=[].slice.call(t.children),o=[];n._stickies.forEach((function(i){(t===n.stickyAbove&&e.canStickyTop||e.canStickyBottom)&&o.push(i)}));for(var a=void 0,s=0,c=o.sort((function(e,t){return(e.state.distanceFromTop||0)-(t.state.distanceFromTop||0)})).filter((function(e){var i=t===n.stickyAbove?e.stickyContentTop:e.stickyContentBottom;return!!i&&r.indexOf(i)>-1}));s<c.length;s++){var l=c[s];if((l.state.distanceFromTop||0)>=(e.state.distanceFromTop||0)){a=l;break}}var m=null;a&&(m=t===n.stickyAbove?a.stickyContentTop:a.stickyContentBottom),t.insertBefore(i,m)}}else t.appendChild(i)},n._removeStickyFromContainers=function(e){n.stickyAbove&&e.stickyContentTop&&n.stickyAbove.contains(e.stickyContentTop)&&n.stickyAbove.removeChild(e.stickyContentTop),n.stickyBelow&&e.stickyContentBottom&&n.stickyBelow.contains(e.stickyContentBottom)&&n.stickyBelow.removeChild(e.stickyContentBottom)},n._onWindowResize=function(){var e=n._getScrollbarWidth(),t=n._getScrollbarHeight();n.setState({scrollbarWidth:e,scrollbarHeight:t}),n.notifySubscribers()},n._getStickyContainerStyle=function(e,t){return(0,h.pi)((0,h.pi)({height:e},(0,g.zg)(n.props.theme)?{right:"0",left:(n.state.scrollbarWidth||n._getScrollbarWidth()||0)+"px"}:{left:"0",right:(n.state.scrollbarWidth||n._getScrollbarWidth()||0)+"px"}),t?{top:"0"}:{bottom:(n.state.scrollbarHeight||n._getScrollbarHeight()||0)+"px"})},n._onScroll=function(){var e=n.contentContainer;e&&n._stickies.forEach((function(t){t.syncScroll(e)})),n._notifyThrottled()},n._subscribers=new Set,n._stickies=new Set,(0,f.l)(n),n._async=new v.e(n),n._events=new E.r(n),n.state={stickyTopHeight:0,stickyBottomHeight:0,scrollbarWidth:0,scrollbarHeight:0},n._notifyThrottled=n._async.throttle(n.notifySubscribers,50),n}return(0,h.ZT)(t,e),Object.defineProperty(t.prototype,"root",{get:function(){return this._root.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyAbove",{get:function(){return this._stickyAboveRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyBelow",{get:function(){return this._stickyBelowRef.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentContainer",{get:function(){return this._contentContainer.current},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){var e=this,t=this.props.initialScrollPosition;this._events.on(this.contentContainer,"scroll",this._onScroll),this._events.on(window,"resize",this._onWindowResize),this.contentContainer&&t&&(this.contentContainer.scrollTop=t),this.setStickiesDistanceFromTop(),this._stickies.forEach((function(t){e.sortSticky(t)})),this.notifySubscribers(),"MutationObserver"in window&&(this._mutationObserver=new MutationObserver((function(t){var n=e._getScrollbarHeight();if(n!==e.state.scrollbarHeight&&e.setState({scrollbarHeight:n}),e.notifySubscribers(),t.some(function(e){return null!==this.stickyAbove&&null!==this.stickyBelow&&(this.stickyAbove.contains(e.target)||this.stickyBelow.contains(e.target))}.bind(e)))e.updateStickyRefHeights();else{var i=[];e._stickies.forEach((function(e){e.root&&e.root.contains(t[0].target)&&i.push(e)})),i.length&&i.forEach((function(e){e.forceUpdate()}))}})),this.root&&this._mutationObserver.observe(this.root,{childList:!0,attributes:!0,subtree:!0,characterData:!0}))},t.prototype.componentWillUnmount=function(){this._events.dispose(),this._async.dispose(),this._mutationObserver&&this._mutationObserver.disconnect()},t.prototype.shouldComponentUpdate=function(e,t){return this.props.children!==e.children||this.props.initialScrollPosition!==e.initialScrollPosition||this.props.className!==e.className||this.state.stickyTopHeight!==t.stickyTopHeight||this.state.stickyBottomHeight!==t.stickyBottomHeight||this.state.scrollbarWidth!==t.scrollbarWidth||this.state.scrollbarHeight!==t.scrollbarHeight},t.prototype.componentDidUpdate=function(e,t){var n=this.props.initialScrollPosition;this.contentContainer&&"number"===typeof n&&e.initialScrollPosition!==n&&(this.contentContainer.scrollTop=n),t.stickyTopHeight===this.state.stickyTopHeight&&t.stickyBottomHeight===this.state.stickyBottomHeight||this.notifySubscribers(),this._async.setTimeout(this._onWindowResize,0)},t.prototype.render=function(){var e=this.props,t=e.className,n=e.theme,i=e.styles,o=this.state,a=o.stickyTopHeight,s=o.stickyBottomHeight,c=C(i,{theme:n,className:t,scrollbarVisibility:this.props.scrollbarVisibility});return r.createElement("div",(0,h.pi)({},(0,k.pq)(this.props,k.n7),{ref:this._root,className:c.root}),r.createElement("div",{ref:this._stickyAboveRef,className:c.stickyAbove,style:this._getStickyContainerStyle(a,!0)}),r.createElement("div",{ref:this._contentContainer,className:c.contentContainer,"data-is-scrollable":!0},r.createElement(S.Provider,{value:this._getScrollablePaneContext()},this.props.children)),r.createElement("div",{className:c.stickyBelow,style:this._getStickyContainerStyle(s,!1)},r.createElement("div",{ref:this._stickyBelowRef,className:c.stickyBelowItems})))},t.prototype.setStickiesDistanceFromTop=function(){var e=this;this.contentContainer&&this._stickies.forEach((function(t){t.setDistanceFromTop(e.contentContainer)}))},t.prototype.forceLayoutUpdate=function(){this._onWindowResize()},t.prototype._checkStickyStatus=function(e){this.stickyAbove&&this.stickyBelow&&this.contentContainer&&e.nonStickyContent&&(e.state.isStickyTop||e.state.isStickyBottom?(e.state.isStickyTop&&!this.stickyAbove.contains(e.nonStickyContent)&&e.stickyContentTop&&e.addSticky(e.stickyContentTop),e.state.isStickyBottom&&!this.stickyBelow.contains(e.nonStickyContent)&&e.stickyContentBottom&&e.addSticky(e.stickyContentBottom)):this.contentContainer.contains(e.nonStickyContent)||e.resetSticky())},t.prototype._getScrollbarWidth=function(){var e=this.contentContainer;return e?e.offsetWidth-e.clientWidth:0},t.prototype._getScrollbarHeight=function(){var e=this.contentContainer;return e?e.offsetHeight-e.clientHeight:0},t}(r.Component),x=n(39785),T=(0,x.z)(N,(function(e){var t,n,i=e.className,r=e.theme,o=(0,u.Cn)(p,r),a={position:"absolute",pointerEvents:"none"},s={position:"absolute",top:0,right:0,bottom:0,left:0,WebkitOverflowScrolling:"touch"};return{root:[o.root,r.fonts.medium,s,i],contentContainer:[o.contentContainer,{overflowY:"always"===e.scrollbarVisibility?"scroll":"auto"},s],stickyAbove:[{top:0,zIndex:1,selectors:(t={},t[u.qJ]={borderBottom:"1px solid WindowText"},t)},a],stickyBelow:[{bottom:0,selectors:(n={},n[u.qJ]={borderTop:"1px solid WindowText"},n)},a],stickyBelowItems:[{bottom:0},a,{width:"100%"}]}}),void 0,{scope:"ScrollablePane"}),w=n(37130);!function(e){e[e.Both=0]="Both",e[e.Header=1]="Header",e[e.Footer=2]="Footer"}(i||(i={}));var _=function(e){function t(t){var n=e.call(this,t)||this;return n._root=r.createRef(),n._stickyContentTop=r.createRef(),n._stickyContentBottom=r.createRef(),n._nonStickyContent=r.createRef(),n._placeHolder=r.createRef(),n.syncScroll=function(e){var t=n.nonStickyContent;t&&n.props.isScrollSynced&&(t.scrollLeft=e.scrollLeft)},n._getContext=function(){return n.context},n._onScrollEvent=function(e,t){if(n.root&&n.nonStickyContent){var i=n._getNonStickyDistanceFromTop(e),r=!1,o=!1;if(n.canStickyTop)r=i-n._getStickyDistanceFromTop()<e.scrollTop;n.canStickyBottom&&e.clientHeight-t.offsetHeight<=i&&(o=i-Math.floor(e.scrollTop)>=n._getStickyDistanceFromTopForFooter(e,t)),document.activeElement&&n.nonStickyContent.contains(document.activeElement)&&(n.state.isStickyTop!==r||n.state.isStickyBottom!==o)?n._activeElement=document.activeElement:n._activeElement=void 0,n.setState({isStickyTop:n.canStickyTop&&r,isStickyBottom:o,distanceFromTop:i})}},n._getStickyDistanceFromTop=function(){var e=0;return n.stickyContentTop&&(e=n.stickyContentTop.offsetTop),e},n._getStickyDistanceFromTopForFooter=function(e,t){var i=0;return n.stickyContentBottom&&(i=e.clientHeight-t.offsetHeight+n.stickyContentBottom.offsetTop),i},n._getNonStickyDistanceFromTop=function(e){var t=0,i=n.root;if(i){for(;i&&i.offsetParent!==e;)t+=i.offsetTop,i=i.offsetParent;i&&i.offsetParent===e&&(t+=i.offsetTop)}return t},(0,f.l)(n),n.state={isStickyTop:!1,isStickyBottom:!1,distanceFromTop:void 0},n._activeElement=void 0,n}return(0,h.ZT)(t,e),Object.defineProperty(t.prototype,"root",{get:function(){return this._root.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeHolder.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyContentTop",{get:function(){return this._stickyContentTop.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stickyContentBottom",{get:function(){return this._stickyContentBottom.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonStickyContent",{get:function(){return this._nonStickyContent.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canStickyTop",{get:function(){return this.props.stickyPosition===i.Both||this.props.stickyPosition===i.Header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canStickyBottom",{get:function(){return this.props.stickyPosition===i.Both||this.props.stickyPosition===i.Footer},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){var e=this._getContext().scrollablePane;e&&(e.subscribe(this._onScrollEvent),e.addSticky(this))},t.prototype.componentWillUnmount=function(){var e=this._getContext().scrollablePane;e&&(e.unsubscribe(this._onScrollEvent),e.removeSticky(this))},t.prototype.componentDidUpdate=function(e,t){var n=this._getContext().scrollablePane;if(n){var i=this.state,r=i.isStickyBottom,o=i.isStickyTop,a=i.distanceFromTop,s=!1;t.distanceFromTop!==a&&(n.sortSticky(this,!0),s=!0),t.isStickyTop===o&&t.isStickyBottom===r||(this._activeElement&&this._activeElement.focus(),n.updateStickyRefHeights(),s=!0),s&&n.syncScrollSticky(this)}},t.prototype.shouldComponentUpdate=function(e,t){if(!this.context.scrollablePane)return!0;var n=this.state,i=n.isStickyTop,r=n.isStickyBottom,o=n.distanceFromTop;return i!==t.isStickyTop||r!==t.isStickyBottom||this.props.stickyPosition!==e.stickyPosition||this.props.children!==e.children||o!==t.distanceFromTop||P(this._nonStickyContent,this._stickyContentTop)||P(this._nonStickyContent,this._stickyContentBottom)||P(this._nonStickyContent,this._placeHolder)},t.prototype.render=function(){var e=this.state,t=e.isStickyTop,n=e.isStickyBottom,i=this.props,o=i.stickyClassName,a=i.children;return this.context.scrollablePane?r.createElement("div",{ref:this._root},this.canStickyTop&&r.createElement("div",{ref:this._stickyContentTop,style:{pointerEvents:t?"auto":"none"}},r.createElement("div",{style:this._getStickyPlaceholderHeight(t)})),this.canStickyBottom&&r.createElement("div",{ref:this._stickyContentBottom,style:{pointerEvents:n?"auto":"none"}},r.createElement("div",{style:this._getStickyPlaceholderHeight(n)})),r.createElement("div",{style:this._getNonStickyPlaceholderHeightAndWidth(),ref:this._placeHolder},(t||n)&&r.createElement("span",{style:u.ul},a),r.createElement("div",{ref:this._nonStickyContent,className:t||n?o:void 0,style:this._getContentStyles(t||n)},a))):r.createElement("div",null,this.props.children)},t.prototype.addSticky=function(e){this.nonStickyContent&&e.appendChild(this.nonStickyContent)},t.prototype.resetSticky=function(){this.nonStickyContent&&this.placeholder&&this.placeholder.appendChild(this.nonStickyContent)},t.prototype.setDistanceFromTop=function(e){var t=this._getNonStickyDistanceFromTop(e);this.setState({distanceFromTop:t})},t.prototype._getContentStyles=function(e){return{backgroundColor:this.props.stickyBackgroundColor||this._getBackground(),overflow:e?"hidden":""}},t.prototype._getStickyPlaceholderHeight=function(e){var t=this.nonStickyContent?this.nonStickyContent.offsetHeight:0;return{visibility:e?"hidden":"visible",height:e?0:t}},t.prototype._getNonStickyPlaceholderHeightAndWidth=function(){var e=this.state,t=e.isStickyTop,n=e.isStickyBottom;if(t||n){var i=0,r=0;return this.nonStickyContent&&this.nonStickyContent.firstElementChild&&(i=this.nonStickyContent.offsetHeight,r=this.nonStickyContent.firstElementChild.scrollWidth+(this.nonStickyContent.firstElementChild.offsetWidth-this.nonStickyContent.firstElementChild.clientWidth)),{height:i,width:r}}return{}},t.prototype._getBackground=function(){if(this.root){for(var e=this.root;"rgba(0, 0, 0, 0)"===window.getComputedStyle(e).getPropertyValue("background-color")||"transparent"===window.getComputedStyle(e).getPropertyValue("background-color");){if("HTML"===e.tagName)return;e.parentElement&&(e=e.parentElement)}return window.getComputedStyle(e).getPropertyValue("background-color")}},t.defaultProps={stickyPosition:i.Both,isScrollSynced:!0},t.contextType=S,t}(r.Component);function P(e,t){return e&&t&&e.current&&t.current&&e.current.offsetHeight!==t.current.offsetHeight}var D=n(45237),B=n(4671);class O extends r.Component{constructor(e){super(e)}render(){const e=l.F.getTrial(this.props.trialId).accuracy;return r.createElement("div",{className:"succeed-padding"},void 0!==e?(0,B.qh)(e):"--")}}var I=O,H=n(36766),R=n(25118),F=n(34546);n(17900),n(78587);class W extends r.Component{constructor(e){super(e),this.state={columns:this.columns,source:l.F.table(this.props.trialIds),sortInfo:{field:"",isDescend:!1}}}componentDidUpdate(e){if(this.props.trialIds!==e.trialIds){const{trialIds:e}=this.props;this.setState((()=>({source:l.F.table(e)})))}}render(){const{columns:e,source:t,sortInfo:n}=this.state,i=(0,B.Lc)(t,n.field,n.isDescend),o=0===t.length;return r.createElement("div",{id:"succTable"},r.createElement(T,{className:"scrollPanel",scrollbarVisibility:b},r.createElement(w.W,{columns:e,items:i,setKey:"set",compact:!0,onRenderRow:this.onRenderRow,onRenderDetailsHeader:this.onRenderDetailsHeader,selectionMode:0,className:"succTable"})),o&&r.createElement("div",{className:"succTable-tooltip"},this.tooltipStr))}onColumnClick=(e,t)=>{const{columns:n,source:i}=this.state,r=n.slice(),o=r.filter((e=>t.key===e.key))[0];r.forEach((e=>{e===o?(o.isSortedDescending=!o.isSortedDescending,o.isSorted=!0):(e.isSorted=!1,e.isSortedDescending=!0)}));const a=(0,B.Lc)(i,o.fieldName,o.isSortedDescending);this.setState({columns:r,source:a,sortInfo:{field:o.fieldName,isDescend:o.isSortedDescending}})};tooltipStr=r.createElement(r.Fragment,null,"The experiment is running, please wait for the final metric patiently. You could also find status of trial job with ",r.createElement("span",null,F.fS)," button.");columns=[{key:"_expand",name:"",onRender:e=>r.createElement(s.J,{"aria-hidden":!0,iconName:"ChevronRight",styles:{root:{transition:"all 0.2s",transform:`rotate(${this.props.expandRowIDs.has(e.id)?90:0}deg)`}},className:"cursor bold positionTop",onClick:this.expandTrialId.bind(this,Event,e.id)}),fieldName:"expand",isResizable:!1,minWidth:20,maxWidth:20},{name:"Trial No.",key:"sequenceId",fieldName:"sequenceId",minWidth:60,maxWidth:80,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>r.createElement("div",{className:"succeed-padding"},e.sequenceId)},{name:"ID",key:"id",fieldName:"id",minWidth:90,maxWidth:100,isResizable:!0,className:"tableHead leftTitle",data:"string",onColumnClick:this.onColumnClick,onRender:e=>r.createElement(o.K,{horizontal:!0,className:"idCopy"},r.createElement("div",{className:"succeed-padding"},e.id),r.createElement(R.Z,{value:e.id}))},{name:"Duration",key:"duration",minWidth:70,maxWidth:120,isResizable:!0,fieldName:"duration",data:"number",onColumnClick:this.onColumnClick,onRender:e=>r.createElement("div",{className:"durationsty succeed-padding"},r.createElement("div",null,(0,B.BG)(e.duration)))},{name:"Status",key:"status",minWidth:88,maxWidth:120,isResizable:!0,fieldName:"status",onRender:e=>r.createElement("div",{className:`${e.status} commonStyle succeed-padding`},e.status)},{name:"Default metric",key:"accuracy",fieldName:"accuracy",minWidth:100,maxWidth:166,isResizable:!0,data:"number",onColumnClick:this.onColumnClick,onRender:e=>r.createElement(I,{trialId:e.id})}];onRenderDetailsHeader=(e,t)=>e?r.createElement(_,{stickyPosition:i.Header,isScrollSynced:!0},t({...e})):null;onRenderRow=e=>{const{expandRowIDs:t}=this.props;return e?r.createElement("div",null,r.createElement("div",null,r.createElement(D.X,e)),Array.from(t).map((t=>t===e.item.id&&r.createElement(H.Z,{key:t,trialId:t})))):null};expandTrialId=(e,t)=>{const{updateOverviewPage:n,changeExpandRowIDs:i}=this.props;i(t),n()}}var z=W,A=n(38450),M=n(22379),$=n(59645),K=n(51263),L=n(84141);function U(e,t){var n=r.useRef(t);return n.current||(n.current=(0,L.z)(e)),n.current}var Z=n(59011),J=n(56919);n(12773);const j=()=>{const e=U("callout-label"),t=U("callout-description"),n=r.createRef(),[i,a]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1),m=(0,r.useCallback)((()=>a(!1)),[]),d=(0,r.useCallback)((()=>a(!0)),[]),u=(0,r.useCallback)((()=>c(!1)),[]),p=(0,r.useCallback)((()=>c(!0)),[]);return r.createElement("div",null,r.createElement(o.K,{horizontal:!0,horizontalAlign:"space-between",className:"marginTop"},r.createElement("div",{className:"basic"},r.createElement("p",null,"Name"),r.createElement("div",{className:"ellipsis"},l.O.profile.params.experimentName||"--"),r.createElement("p",{className:"marginTop"},"ID"),r.createElement("div",{className:"ellipsis"},l.O.profile.id)),r.createElement("div",{className:"basic"},r.createElement("p",null,"Status"),r.createElement(o.K,{horizontal:!0,className:"status"},r.createElement("span",{className:`${l.O.status} status-text`},l.O.status),"ERROR"===l.O.status?r.createElement("div",null,r.createElement("div",{className:`${J.W.buttonArea} error-info-icon`,ref:n},r.createElement(M.h,{iconProps:{iconName:"info"},onClick:i?m:d})),i&&r.createElement($.U,{className:J.W.callout,ariaLabelledBy:e,ariaDescribedBy:t,role:"alertdialog",gapSpace:0,target:n,onDismiss:m,setInitialFocus:!0},r.createElement("div",{className:`${J.W.header} font`},r.createElement("p",{className:`${J.W.title} color333`,id:e},"Error")),r.createElement("div",{className:`${J.W.inner} font`},r.createElement("p",{className:`${J.W.subtext} color333`,id:t},l.O.error),r.createElement("div",{className:J.W.actions},r.createElement(K.r,{className:J.W.link,onClick:p},"Learn more"))))):null),r.createElement(Te.Consumer,null,(e=>r.createElement(o.K,{className:"bestMetric"},r.createElement("p",{className:"marginTop"},"Best metric"),r.createElement("div",{className:l.O.status},isNaN(e.bestAccuracy)?"N/A":e.bestAccuracy.toFixed(6)))))),r.createElement("div",{className:"basic"},r.createElement("p",null,"Start time"),r.createElement("div",{className:"ellipsis"},(0,B.i$)(l.O.profile.startTime)),r.createElement("p",{className:"marginTop"},"End time"),r.createElement("div",{className:"ellipsis"},(0,B.i$)(l.O.profile.endTime)))),s?r.createElement(Z.Z,{closePanel:u,activeTab:"dispatcher"}):null)};var G=n(41772),q=n(36177),V=n.n(q),Y=n(8819);const X=r.createContext({editType:"",field:"",title:"",maxExecDuration:"",maxTrialNum:0,trialConcurrency:0,updateOverviewPage:()=>{}}),Q={width:"28%"},ee=[{key:"10",text:"10"},{key:"20",text:"20"},{key:"30",text:"30"},{key:"50",text:"40"},{key:"100",text:"100"}],te=[{key:"m",text:"min"},{key:"h",text:"hour"},{key:"d",text:"day"}];var ne=n(20053),ie=n(39564);const re=r.createRef(),oe=()=>{const[e,t]=(0,r.useState)(!0),[n,i]=(0,r.useState)(!1),[o,a]=(0,r.useState)(""),[s,d]=(0,r.useState)(""),u=(0,r.useCallback)((()=>{t(!0)}),[]),p=(0,r.useCallback)((()=>{t(!1)}),[]),h=(0,r.useCallback)((()=>i(!0)),[]),y=(0,r.useCallback)((()=>{i(!1)}),[]),{title:g,field:f,editType:v,maxExecDuration:E,maxTrialNum:k,trialConcurrency:b,updateOverviewPage:S}=(0,r.useContext)(X),C=l.O.profile.params.maxExperimentDuration,{maxDurationUnit:N,changeMaxDurationUnit:x}=(0,r.useContext)(m.I),[T,w]=(0,r.useState)(N);let _="",P="";"Max duration"===g?(_=E,P=E):g===G.Nn?(_=k.toString(),P=k.toString()):(_=b.toString(),P=b.toString());const[D,B]=(0,r.useState)(P);function O(e){B(e.target.value)}function I(e,t){d(e),a(t),h(),setTimeout(y,2e3)}function H(e,t){void 0!==t&&w(t.key)}function R(e,t,n){I(e,t),B(n)}async function F(){const e="Max duration"===g,t=Object.assign({},l.O.profile);let n="";if(e){if(!D.match(/^\d+(?=\.{0,1}\d+$|$)/))return void R("Please enter a number!","error",_);if((0,Y.m)(`${D}${T}`)<l.O.profile.execDuration)return void R("Please input a valid value. (Current duration is more than the number you input.)","error",_)}else if(!D.match(/^[1-9]\d*$/))return void R("Please enter a positive integer!","error",_);if(n=e?E:g===G.Nn?k.toString():b.toString(),D===n){if(!e)return void I(`Trial ${f} has not changed`,"error");if(N===T)return void I(`Trial ${f} has not changed`,"error")}if(e){const e=JSON.parse(D);t.params[f]=`${e}${T}`}else t.params[f]=parseInt(D,10);try{200===(await V().put(`${G.zU}/experiment`,t,{params:{update_type:v}})).status&&(e&&x(T),I(`Successfully updated experiment's ${f}`,"success"),S())}catch(i){i.response&&i.response.data.error?I(`Failed to update trial ${f}\n${i.response.data.error}`,"error"):i.response?I(`Failed to update trial ${f}\nServer responsed ${i.response.status}`,"error"):i.message?I(`Failed to update trial ${f}\n${i.message}`,"error"):I(`Failed to update trial ${f}\nUnknown error`,"error"),B(_),t.params[f]=e?C:n}u()}function W(){B(_),u(),w(N)}return r.createElement(m.I.Consumer,null,(t=>r.createElement(X.Consumer,null,(i=>{let a="";return"maxExperimentDuration"===i.field&&(a=e?"noEditDuration":"editDuration"),r.createElement(r.Fragment,null,r.createElement("div",{className:`${a} editparam`},r.createElement("div",{className:"title"},i.title),r.createElement("input",{className:`${i.field} editparam-Input`,ref:re,disabled:!!e,value:D,onChange:O}),e&&"Max duration"===g&&r.createElement("span",null,"d"===(l=t.maxDurationUnit)?"day":"h"===l?"hour":"m"===l?"min":l),!e&&"Max duration"===g&&r.createElement(c.L,{selectedKey:T,options:te,className:"editparam-dropdown",onChange:H}),e&&r.createElement("span",{className:"edit cursor",onClick:p},ne.I8),!e&&r.createElement("span",{className:"series"},r.createElement("span",{className:"confirm cursor",onClick:F},ne.Y_),r.createElement("span",{className:"cancel cursor",onClick:W},ne.$j)),n&&r.createElement(ie.Z,{className:"info",typeInfo:o,info:s})));var l}))))},ae=r.createContext({maxExecDuration:0,execDuration:0,updateOverviewPage:()=>{},maxDurationUnit:"m",changeMaxDurationUnit:e=>{}});var se=n(63700),ce=n(45546),le=(0,y.y)(),me=function(e){function t(t){var n=e.call(this,t)||this;n._onRenderProgress=function(e){var t=n.props,i=t.ariaValueText,o=t.barHeight,a=t.className,s=t.description,c=t.label,l=void 0===c?n.props.title:c,m=t.styles,d=t.theme,u="number"===typeof n.props.percentComplete?Math.min(100,Math.max(0,100*n.props.percentComplete)):void 0,p=le(m,{theme:d,className:a,barHeight:o,indeterminate:void 0===u}),h={width:void 0!==u?u+"%":void 0,transition:void 0!==u&&u<.01?"none":void 0},y=void 0!==u?0:void 0,g=void 0!==u?100:void 0,f=void 0!==u?Math.floor(u):void 0;return r.createElement("div",{className:p.itemProgress},r.createElement("div",{className:p.progressTrack}),r.createElement("div",{className:p.progressBar,style:h,role:"progressbar","aria-describedby":s?n._descriptionId:void 0,"aria-labelledby":l?n._labelId:void 0,"aria-valuemin":y,"aria-valuemax":g,"aria-valuenow":f,"aria-valuetext":i}))};var i=(0,L.z)("progress-indicator");return n._labelId=i+"-label",n._descriptionId=i+"-description",n}return(0,h.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=e.barHeight,n=e.className,i=e.label,o=void 0===i?this.props.title:i,a=e.description,s=e.styles,c=e.theme,l=e.progressHidden,m=e.onRenderProgress,d=void 0===m?this._onRenderProgress:m,u="number"===typeof this.props.percentComplete?Math.min(100,Math.max(0,100*this.props.percentComplete)):void 0,p=le(s,{theme:c,className:n,barHeight:t,indeterminate:void 0===u});return r.createElement("div",{className:p.root},o?r.createElement("div",{id:this._labelId,className:p.itemName},o):null,l?null:d((0,h.pi)((0,h.pi)({},this.props),{percentComplete:u}),this._onRenderProgress),a?r.createElement("div",{id:this._descriptionId,className:p.itemDescription},a):null)},t.defaultProps={label:"",description:"",width:180},t}(r.Component),de=n(31469),ue={root:"ms-ProgressIndicator",itemName:"ms-ProgressIndicator-itemName",itemDescription:"ms-ProgressIndicator-itemDescription",itemProgress:"ms-ProgressIndicator-itemProgress",progressTrack:"ms-ProgressIndicator-progressTrack",progressBar:"ms-ProgressIndicator-progressBar"},pe=(0,de.NF)((function(){return(0,u.F4)({"0%":{left:"-30%"},"100%":{left:"100%"}})})),he=(0,de.NF)((function(){return(0,u.F4)({"100%":{right:"-30%"},"0%":{right:"100%"}})})),ye=(0,x.z)(me,(function(e){var t,n,i,r=(0,g.zg)(e.theme),o=e.className,a=e.indeterminate,s=e.theme,c=e.barHeight,l=void 0===c?2:c,m=s.palette,d=s.semanticColors,p=s.fonts,y=(0,u.Cn)(ue,s),f=m.neutralLight;return{root:[y.root,p.medium,o],itemName:[y.itemName,u.jq,{color:d.bodyText,paddingTop:4,lineHeight:20}],itemDescription:[y.itemDescription,{color:d.bodySubtext,fontSize:p.small.fontSize,lineHeight:18}],itemProgress:[y.itemProgress,{position:"relative",overflow:"hidden",height:l,padding:"8px 0"}],progressTrack:[y.progressTrack,{position:"absolute",width:"100%",height:l,backgroundColor:f,selectors:(t={},t[u.qJ]={borderBottom:"1px solid WindowText"},t)}],progressBar:[{backgroundColor:m.themePrimary,height:l,position:"absolute",transition:"width .3s ease",width:0,selectors:(n={},n[u.qJ]=(0,h.pi)({backgroundColor:"highlight"},(0,u.xM)()),n)},a?{position:"absolute",minWidth:"33%",background:"linear-gradient(to right, "+f+" 0%, "+m.themePrimary+" 50%, "+f+" 100%)",animation:(r?he():pe())+" 3s infinite",selectors:(i={},i[u.qJ]={background:"highlight"},i)}:{transition:"width .15s linear"},y.progressBar]}}),void 0,{scope:"ProgressIndicator"});const ge={width:"60%",position:"relative"},fe={paddingLeft:"9%",boxSizing:"border-box"};var ve=e=>{const{tooltip:t,percent:n,latestVal:i,presetVal:a}=e;return r.createElement(o.K,{horizontal:!0,className:"marginTop"},r.createElement("div",{style:ge},r.createElement(se.G,{content:t,directionalHint:ce.b.bottomCenter,tooltipProps:G.$8},r.createElement(ye,{className:l.O.status,percentComplete:n,barHeight:8})),r.createElement("div",{className:"exp-progress"},r.createElement("span",{className:`${l.O.status} bold`},i),r.createElement("span",{className:"joiner"},"/"),r.createElement("span",null,a))))};const Ee=()=>r.createElement(ae.Consumer,null,(e=>{const{maxExecDuration:t,execDuration:n,maxDurationUnit:i,updateOverviewPage:o}=e,a=t-n,s=n/t,c=(0,B.BG)(n),m=(0,B.TZ)(i,t).toString();return r.createElement(r.Fragment,null,r.createElement(ve,{tooltip:`${(0,B.BG)(a)} remaining`,percent:s,latestVal:c,presetVal:`${m} ${i}`}),r.createElement("div",{className:"editExpDuration"},r.createElement(X.Provider,{value:{editType:G.Jw[0],field:"maxExperimentDuration",title:"Max duration",maxExecDuration:m,maxTrialNum:l.O.maxTrialNumber,trialConcurrency:l.O.profile.params.trialConcurrency,updateOverviewPage:o}},r.createElement(oe,null))))})),ke={childrenGap:60},be={childrenGap:80},Se=()=>{const e=l.F.countStatus(),t=e.get("USER_CANCELED")+e.get("SYS_CANCELED")+e.get("EARLY_STOPPED"),n=e.get("RUNNING")+e.get("SUCCEEDED")+e.get("FAILED")+t,i=l.O.maxTrialNumber,a=n/i;return r.createElement(ae.Consumer,null,(s=>{const{updateOverviewPage:c}=s;return r.createElement(r.Fragment,null,r.createElement(ve,{tooltip:`${n.toString()} trials`,percent:a,latestVal:String(n),presetVal:String(i)}),r.createElement(o.K,{horizontal:!0,className:"marginTop"},r.createElement("div",{style:ge},r.createElement(o.K,{horizontal:!0,className:"status-count",tokens:ke},r.createElement("div",null,r.createElement("span",null,"Running"),r.createElement("p",null,e.get("RUNNING"))),r.createElement("div",null,r.createElement("span",null,"Succeeded"),r.createElement("p",null,e.get("SUCCEEDED"))),r.createElement("div",null,r.createElement("span",null,"Stopped"),r.createElement("p",null,t))),r.createElement(o.K,{horizontal:!0,className:"status-count marginTop",tokens:be},r.createElement("div",null,r.createElement("span",null,"Failed"),r.createElement("p",null,e.get("FAILED"))),r.createElement("div",null,r.createElement("span",null,"Waiting"),r.createElement("p",null,e.get("WAITING"))))),r.createElement("div",{style:fe},r.createElement(X.Provider,{value:{title:G.Nn,field:"maxTrialNumber",editType:G.Jw[1],maxExecDuration:"",maxTrialNum:l.O.maxTrialNumber,trialConcurrency:l.O.profile.params.trialConcurrency,updateOverviewPage:c}},r.createElement("div",{className:"maxTrialNum"},r.createElement(oe,null))),r.createElement("div",{className:"concurrency"},r.createElement(X.Provider,{value:{title:"Concurrency",field:"trialConcurrency",editType:G.Jw[2],maxExecDuration:"",maxTrialNum:l.O.maxTrialNumber,trialConcurrency:l.O.profile.params.trialConcurrency,updateOverviewPage:c}},r.createElement(oe,null))))))}))};var Ce=n(25984);var Ne=()=>{const e=l.O.profile.params.tuner,t=l.O.profile.params.advisor,n=l.O.profile.params.assessor,i=[],a=[];return void 0!==e&&(i.push("Tuner"),a.push(e.name||e.className||"unknown")),void 0!==t&&(i.push("Advisor"),a.push(t.name||t.className||"unknown")),void 0!==n&&(i.push("Assessor"),a.push(n.name||n.className||"unknown")),r.createElement(o.K,{horizontal:!0},r.createElement("div",{className:"basic",style:ge},r.createElement("p",{className:"command"},"Log directory"),r.createElement(Ce.Z,{value:l.O.profile.logDir||"unknown"}),r.createElement("p",{className:"lineMargin"},"Trial command"),r.createElement(Ce.Z,{value:l.O.config.trialCommand||"unknown"})),r.createElement("div",{className:"basic",style:fe},r.createElement("div",null,r.createElement("p",{className:"command"},"Training platform"),r.createElement("div",{className:"ellipsis"},l.O.trainingServicePlatform),r.createElement("p",{className:"lineMargin"},i.join("/")),r.createElement("div",{className:"ellipsis"},a.join("/")))))},xe=n(43926);n(18394),n(62593);const Te=r.createContext({bestAccuracy:0});class we extends r.Component{static contextType=m.I;constructor(e){super(e),this.state={trialConcurrency:l.O.trialConcurrency}}clickMaxTop=e=>{e.stopPropagation();const{changeMetricGraphMode:t}=this.context;t("max")};clickMinTop=e=>{e.stopPropagation();const{changeMetricGraphMode:t}=this.context;t("min")};updateEntries=(e,t)=>{void 0!==t&&this.context.changeEntries(t.key)};render(){const e=this.findBestTrials(),t=e.length>0?e[0].accuracy:NaN,n=l.O.profile.execDuration;return r.createElement(m.I.Consumer,null,(i=>{const{metricGraphMode:m,bestTrialEntries:u,maxDurationUnit:p,expandRowIDs:h,updateOverviewPage:y,changeMaxDurationUnit:g,changeExpandRowIDs:f}=i,v="max"===m?"active":"",E="min"===m?"active":"";return r.createElement("div",{className:"overview"},r.createElement("div",{className:"overviewWrapper"},r.createElement("div",{className:"overviewBasicInfo"},r.createElement(xe.b.Provider,{value:{text:"Experiment",icon:"AutoRacing"}},r.createElement(d.D,null)),r.createElement(Te.Provider,{value:{bestAccuracy:t}},r.createElement(j,null))),r.createElement("div",{className:"duration"},r.createElement(xe.b.Provider,{value:{text:"Duration",icon:"Timer"}},r.createElement(d.D,null)),r.createElement(ae.Provider,{value:{maxExecDuration:l.O.maxExperimentDurationSeconds,execDuration:n,updateOverviewPage:y,maxDurationUnit:p,changeMaxDurationUnit:g}},r.createElement(Ee,null))),r.createElement("div",{className:"trialCount"},r.createElement(xe.b.Provider,{value:{text:"Trial numbers",icon:"NumberSymbol"}},r.createElement(d.D,null)),r.createElement(ae.Provider,{value:{maxExecDuration:l.O.maxExperimentDurationSeconds,execDuration:n,updateOverviewPage:y,maxDurationUnit:p,changeMaxDurationUnit:g}},r.createElement(Se,null))),r.createElement("div",{className:"overviewBestMetric"},r.createElement(o.K,{horizontal:!0},r.createElement("div",{style:Q},r.createElement(xe.b.Provider,{value:{text:"Top trials",icon:"BulletedList"}},r.createElement(d.D,null))),r.createElement("div",{className:"topTrialTitle"},r.createElement(o.K,{horizontal:!0,horizontalAlign:"end"},r.createElement(a.a,{onClick:this.clickMaxTop,className:v,styles:{root:{minWidth:70,padding:0}}},r.createElement(s.J,{iconName:"Market"}),r.createElement("span",{className:"max"},"Max")),r.createElement("div",{className:"mincenter"},r.createElement(a.a,{onClick:this.clickMinTop,className:E,styles:{root:{minWidth:70,padding:0}}},r.createElement(s.J,{iconName:"MarketDown"}),r.createElement("span",{className:"max"},"Min"))),r.createElement("div",null,r.createElement(o.K,{horizontal:!0},r.createElement("div",{className:"chooseEntry"},"Display top"),r.createElement("div",null,r.createElement(c.L,{selectedKey:u,options:ee,onChange:this.updateEntries,styles:{root:{width:70}}}))))))),r.createElement("div",{className:"overviewChart"},r.createElement(A.Z,{trialIds:e.map((e=>e.info.trialJobId)),chartHeight:300,hasBestCurve:!1,changeExpandRowIDs:f}),r.createElement(z,{trialIds:e.map((e=>e.info.trialJobId)),updateOverviewPage:y,expandRowIDs:h,changeExpandRowIDs:f}))),r.createElement(o.K,{className:"overviewCommand"},r.createElement(Ne,null))))}))}findBestTrials(){const e=l.F.sort(),{bestTrialEntries:t,metricGraphMode:n}=this.context;return"max"===n?e.reverse().splice(JSON.parse(t)):e.splice(JSON.parse(t)),e}}var _e=we},66133:function(e,t,n){n.d(t,{D:function(){return s}});var i=n(16449),r=n(87578),o=n(89623),a=n(43926);n(42928);const s=()=>i.createElement(a.b.Consumer,null,(e=>i.createElement(r.K,{horizontal:!0,className:"panelTitle"},i.createElement(o.J,{iconName:e.icon}),i.createElement("span",{className:"fontColor333"},e.text))))},43926:function(e,t,n){n.d(t,{b:function(){return i}});const i=n(16449).createContext({text:"",icon:""})},56919:function(e,t,n){n.d(t,{W:function(){return o}});var i=n(93272);const r=(0,i.gh)(),o=(0,i.ZC)({buttonArea:{verticalAlign:"top",display:"inline-block",textAlign:"center",minWidth:30,height:30},callout:{maxWidth:300},header:{padding:"18px 24px 12px"},title:[r.fonts.xLarge,{margin:0,color:r.palette.neutralPrimary,fontWeight:i.lq.semilight}],inner:{height:"100%",padding:"0 24px 20px"},actions:{position:"relative",marginTop:20,width:"100%",whiteSpace:"nowrap"},subtext:[r.fonts.small,{margin:0,color:r.palette.neutralPrimary,fontWeight:i.lq.semilight}],link:[r.fonts.medium,{color:r.palette.neutralPrimary}],buttons:{display:"flex",justifyContent:"flex-end",padding:"0 24px 24px"}})},38450:function(e,t,n){var i=n(16449),r=n(87578),o=n(23270),a=n(87735),s=n(27847),c=n(30965),l=n(4671),m=n(81999),d=n(69151);n(76088),n(38570),n(21258);const u={grid:{left:"8%"},xAxis:{name:"Trial",type:"category"},yAxis:{name:"Default metric",type:"value"}};class p extends i.Component{constructor(e){super(e),this.state={bestCurveEnabled:!1,startY:0,endY:100,userSelectOptimizeMode:(0,d.a)(c.O.optimizeMode),userSelectAccuracyNumberKey:"default"}}loadDefault=(e,t)=>{this.setState({bestCurveEnabled:t})};metricDataZoom=e=>{void 0!==e.batch&&this.setState((()=>({startY:null!==e.batch[0].start?e.batch[0].start:0,endY:null!==e.batch[0].end?e.batch[0].end:100})))};pointClick=e=>{const{hasBestCurve:t}=this.props;t||this.props.changeExpandRowIDs(e.data[2],"chart")};generateGraphConfig(e){const{startY:t,endY:n,userSelectAccuracyNumberKey:i}=this.state,{hasBestCurve:r}=this.props;return{grid:{left:"8%"},tooltip:{trigger:"item",enterable:r,confine:!0,formatter:e=>`\n                    <div class="tooldetailAccuracy">\n                        <div>Trial No.: ${e.data[0]}</div>\n                        <div>Trial ID: ${e.data[2]}</div>\n                        <div>${i}: ${e.data[1]}</div>\n                        <div>Parameters: <pre>${JSON.stringify((0,l.cJ)(e.data[3]),null,4)}</pre></div>\n                    </div>\n                `},dataZoom:[{id:"dataZoomY",type:"inside",yAxisIndex:[0],filterMode:"empty",start:t,end:n}],xAxis:{name:"Trial",type:"category"},yAxis:{name:"Default metric",type:"value",scale:!0},series:void 0}}formatAccuracy(e){return void 0===e||isNaN(e)||!isFinite(e)?0:e}generateScatterSeries(e){const{userSelectAccuracyNumberKey:t}=this.state;let n;return n=e[0].accuracyNumberTypeDictKeys.length>1?e.map((e=>[e.sequenceId,void 0===e.acc?0:this.formatAccuracy(e.acc[t]),e.id,e.parameter])):e.map((e=>[e.sequenceId,this.formatAccuracy(e.accuracy),e.id,e.parameter])),{symbolSize:6,type:"scatter",data:n}}generateBestCurveSeries(e){const{userSelectOptimizeMode:t,userSelectAccuracyNumberKey:n}=this.state;let i=e[0];const r=[[i.sequenceId,void 0===i.acc?0:this.formatAccuracy(i.acc[n]),i.id,i.parameter]];for(let o=1;o<e.length;o++){const a=e[o],s=a.acc[n]-i.acc[n];("minimize"===t?s<0:s>0)?(r.push([a.sequenceId,void 0===a.acc?0:this.formatAccuracy(a.acc[n]),i.id,a.parameter]),i=a):r.push([a.sequenceId,void 0===i.acc?0:this.formatAccuracy(i.acc[n]),i.id,a.parameter])}return{type:"line",lineStyle:{color:"#FF6600"},data:r}}updateUserOptimizeMode=(e,t)=>{void 0!==t&&this.setState({userSelectOptimizeMode:t.key.toString()})};updateTrialfinalResultKeys=(e,t)=>{void 0!==t&&this.setState({userSelectAccuracyNumberKey:t.key.toString()},(()=>{this.generateGraph()}))};render(){const{hasBestCurve:e,chartHeight:t}=this.props,{userSelectOptimizeMode:n,userSelectAccuracyNumberKey:l}=this.state,d=c.F.getTrials(this.props.trialIds).filter((e=>e.sortable)),p=this.generateGraph(),h=p===u?"No data":"",y={dataZoom:this.metricDataZoom,click:this.pointClick};let g=[];return d.length>0&&(g=d[0].accuracyNumberTypeDictKeys),i.createElement("div",null,e&&i.createElement(r.K,{horizontal:!0,reversed:!0,tokens:m.s1,className:"default-metric"},i.createElement(o.Z,{label:"Optimization curve",inlineLabel:!0,onChange:this.loadDefault}),i.createElement(a.L,{selectedKey:n,onChange:this.updateUserOptimizeMode,options:[{key:"maximize",text:"Maximize"},{key:"minimize",text:"Minimize"}],styles:{dropdown:{width:100}},className:"para-filter-percent"}),g.length>1&&i.createElement(a.L,{selectedKey:l,onChange:this.updateTrialfinalResultKeys,options:g.map((e=>({key:e,text:e}))),styles:{dropdown:{width:100}},className:"para-filter-percent"})),i.createElement("div",{className:"default-metric-graph graph"},i.createElement(s.Z,{option:p,style:{width:"100%",height:t,margin:"0 auto"},theme:"nni_theme",notMerge:!0,onEvents:y}),i.createElement("div",{className:"default-metric-noData fontColor333"},h)))}generateGraph(){const e=c.F.getTrials(this.props.trialIds).filter((e=>e.sortable));if(0===e.length)return u;const t=this.generateGraphConfig(e[e.length-1].sequenceId);return this.state.bestCurveEnabled?t.series=[this.generateBestCurveSeries(e),this.generateScatterSeries(e)]:t.series=[this.generateScatterSeries(e)],t}}t.Z=p},69151:function(e,t,n){function i(e){return"unknown"===e?"maximize":e}n.d(t,{a:function(){return i}})},17900:function(){},12773:function(){},18394:function(){},42928:function(){},78587:function(){},62593:function(){}}]);
//# sourceMappingURL=543.4a28953e.chunk.js.map