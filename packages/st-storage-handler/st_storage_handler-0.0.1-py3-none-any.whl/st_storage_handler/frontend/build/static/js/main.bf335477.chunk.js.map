{"version":3,"sources":["StorageHandler.tsx","index.js"],"names":["withStreamlitConnection","props","_ref","args","method","set_keys","get_key","remove_key","_useState","useState","_useState2","_slicedToArray","returnValue","setReturnValue","_useState3","_useState4","hasInitialized","setHasInitialized","useEffect","key","localStorage","setItem","_step","result","_iterator","_createForOfIteratorHelper","s","n","done","value","getItem","err","e","f","_step2","_iterator2","removeItem","clear","Streamlit","setFrameHeight","setComponentReady","setComponentValue","React","createElement","ReactDOM","render","StrictMode","StorageHandler","document","getElementById"],"mappings":"yLAsDeA,eA5CQ,SAACC,GACtB,IAAAC,EAAkDD,EAAME,KAAhDC,EAAMF,EAANE,OAAQC,EAAQH,EAARG,SAAUC,EAAOJ,EAAPI,QAASC,EAAUL,EAAVK,WACnCC,EAAsCC,mBAAc,MAAKC,EAAAC,YAAAH,EAAA,GAAlDI,EAAWF,EAAA,GAAEG,EAAcH,EAAA,GAClCI,EAA4CL,oBAAS,GAAMM,EAAAJ,YAAAG,EAAA,GAApDE,EAAcD,EAAA,GAAEE,EAAiBF,EAAA,GAsCxC,OApCAG,qBAAU,WACR,IAAKF,EAAgB,CACnB,GAAe,QAAXZ,GAAoBC,EAAU,CAChC,IAAK,IAAMc,KAAOd,EAChBe,aAAaC,QAAQF,EAAKd,EAASc,IAErCN,GAAe,QACV,GAAe,QAAXT,GAAoBE,EAAS,CACtC,IACyBgB,EADnBC,EAA2C,GAAGC,EAAAC,YAClCnB,GAAO,IAAzB,IAAAkB,EAAAE,MAAAJ,EAAAE,EAAAG,KAAAC,MAA2B,CAAC,IAAjBT,EAAGG,EAAAO,MACNA,EAAQT,aAAaU,QAAQX,GACrB,OAAVU,IACFN,EAAOJ,GAAOU,IAEjB,MAAAE,GAAAP,EAAAQ,EAAAD,GAAA,QAAAP,EAAAS,IACDpB,EAAeU,QACV,GAAe,WAAXnB,GAAuBG,EAAY,CAAC,IACjB2B,EADgBC,EAAAV,YAC1BlB,GAAU,IAA5B,IAAA4B,EAAAT,MAAAQ,EAAAC,EAAAR,KAAAC,MAA8B,CAAC,IAApBT,EAAGe,EAAAL,MACZT,aAAagB,WAAWjB,IACzB,MAAAY,GAAAI,EAAAH,EAAAD,GAAA,QAAAI,EAAAF,IACDpB,GAAe,OACK,UAAXT,IACTgB,aAAaiB,QACbxB,GAAe,IAGjByB,IAAUC,iBACVD,IAAUE,oBACVvB,GAAkB,MAEnB,CAACD,EAAgBZ,EAAQC,EAAUC,EAASC,IAE/CW,qBAAU,WACRoB,IAAUG,kBAAkB7B,KAC3B,CAACA,IAEG8B,IAAAC,cAAA,eC9CTC,IAASC,OACPH,IAAAC,cAACD,IAAMI,WAAU,KACfJ,IAAAC,cAACI,EAAc,OAEjBC,SAASC,eAAe,U","file":"static/js/main.bf335477.chunk.js","sourcesContent":["import { Streamlit, ComponentProps, withStreamlitConnection } from \"streamlit-component-lib\";\r\nimport React, { useEffect, useState } from \"react\";\r\n\r\ninterface Args {\r\n  method: string;\r\n  set_keys: { [key: string]: string } | null;\r\n  get_key: string[] | null;\r\n  remove_key: string[] | null;\r\n}\r\n\r\nconst StorageHandler = (props: ComponentProps) => {\r\n  const { method, set_keys, get_key, remove_key } = props.args as Args;\r\n  const [returnValue, setReturnValue] = useState<any>(null);\r\n  const [hasInitialized, setHasInitialized] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!hasInitialized) {\r\n      if (method === \"set\" && set_keys) {\r\n        for (const key in set_keys) {\r\n          localStorage.setItem(key, set_keys[key]);\r\n        }\r\n        setReturnValue(true);\r\n      } else if (method === \"get\" && get_key) {\r\n        const result: { [key: string]: string | null } = {};\r\n        for (const key of get_key) {\r\n          const value = localStorage.getItem(key);\r\n          if (value !== null) {\r\n            result[key] = value;\r\n          }\r\n        }\r\n        setReturnValue(result);\r\n      } else if (method === \"remove\" && remove_key) {\r\n        for (const key of remove_key) {\r\n          localStorage.removeItem(key);\r\n        }\r\n        setReturnValue(true);\r\n      } else if (method === \"clear\") {\r\n        localStorage.clear();\r\n        setReturnValue(true);\r\n      }\r\n      \r\n      Streamlit.setFrameHeight();\r\n      Streamlit.setComponentReady();\r\n      setHasInitialized(true);\r\n    }\r\n  }, [hasInitialized, method, set_keys, get_key, remove_key]);\r\n\r\n  useEffect(() => {\r\n    Streamlit.setComponentValue(returnValue);\r\n  }, [returnValue]);\r\n\r\n  return <div></div>;\r\n};\r\n\r\nexport default withStreamlitConnection(StorageHandler);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport StorageHandler from \"./StorageHandler\"\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StorageHandler />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n)"],"sourceRoot":""}