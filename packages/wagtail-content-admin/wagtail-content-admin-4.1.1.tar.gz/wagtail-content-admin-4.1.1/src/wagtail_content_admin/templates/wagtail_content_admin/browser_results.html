{% load wagtail_content_admin_tags wagtailadmin_tags django_auxiliaries_tags %}
{% load i18n l10n %}

{% block extra_css %}
    <link rel="stylesheet" href="{% tagged_static 'wagtail_content_admin/css/wagtail_content_admin.css' %}" type="text/css">
{% endblock %}

{% url add_url as add_link %}

{% if instances %}
    {% if is_searching %}
        <h2 role="alert">
        {% blocktrans count counter=instances.paginator.count %}
            There is {{ counter }} match
        {% plural %}
            There are {{ counter }} matches
        {% endblocktrans %}
        </h2>
        <h2>There are {{ instances.paginator.count }} matche(s). </h2>

        {# search_other #}
    {% else %}
        <h2>{{ latest_prompt }}</h2>
    {% endif %}

    {# Used below for the checkbox aria_labelledby #}
    <p class="visuallyhidden" id="select-content-item-label">{{ select_prompt }}</p>

    <ul class="listing horiz content-items">
        {% for instance in instances %}
            <li>
                {% include "wagtailadmin/bulk_actions/listing_checkbox_cell.html" with obj_type="media item" obj=instance aria_labelledby_prefix="select-content-item-label content_item_" aria_labelledby=instance.pk|unlocalize aria_labelledby_suffix="_title" %}
                {% content_item_delegate content_item_delegate instance action='render_entry' %}
            </li>
        {% endfor %}
    </ul>

    {% include "wagtailadmin/shared/pagination_nav.html" with items=instances %}

{% else %}
    {% if is_searching %}
        <h2 role="alert">{% blocktrans %}Sorry, no media items match "<em>{{ query_string }}</em>"{% endblocktrans %}</h2>

        {# search_other #}
    {% else %}
        {% if current_collection %}
            <p>{% blocktrans %}You haven't uploaded any content items in this collection. Why not <a href="{{ add_link }}">upload one now</a>?{% endblocktrans %}</p>
        {% else %}
            <p>{% blocktrans %}You haven't uploaded any content items. Why not <a href="{{ add_link }}">upload one now</a>?{% endblocktrans %}</p>
        {% endif %}
    {% endif %}
{% endif %}

