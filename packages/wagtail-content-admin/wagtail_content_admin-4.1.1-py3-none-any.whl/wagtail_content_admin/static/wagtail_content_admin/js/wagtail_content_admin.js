(()=>{"use strict";var t={578:(t,e,n)=>{n.r(e)},357:(t,e,n)=>{n.r(e)},884:function(t,e,n){var i,r=this&&this.__extends||(i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(e,t,n);return s(e,t),e},c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},u=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},h=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.AnnotationEditor=e.AnnotationField=e.AnnotationPanel=void 0,n(578);var d=l(n(802)),p=f(n(363)),m=f(n(519)),y=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:e.initialValue},n.selectionChanged=n.selectionChanged.bind(n),n.render=n.render.bind(n),n}return r(e,t),e.prototype.selectionChanged=function(t){var e=this.props,n=e.editor,i=e.panel,r=e.field;this.setState((function(e){return{value:t}})),n.fieldChanged(i,r)},e.prototype.render=function(){for(var t,e=this,n=this.props,i=n.choices,r=n.attributes,a=n.elementRef,s=[],l=0;l<i.length;l++){var u,h;u=(t=c(i[l],2))[0],h=t[1],s.push(p.default.createElement("option",{key:u,value:u},h))}return p.default.createElement("select",o({ref:a},r,{value:this.state.value,onChange:function(t){e.selectionChanged(t.target.value)}}),s)},e}(p.default.Component),_={};e.AnnotationPanel=_,_.create=function(){},_.getIdentifier=function(t){return t.identifier||""},_.getLabel=function(t){return t.label||""},_.getFields=function(t){return Array.from(t.fields||[])};var b={};e.AnnotationField=b,b.create=function(){},b.getIdentifier=function(t){return t.identifier||""},b.getLabel=function(t){return t.label||""},b.getType=function(t){return t.type||"hidden"},b.getDefaultValue=function(t){return t.default_value||""},b.getAttributes=function(t){return t.attributes||{}};var v=function(t,e,n){d.bind_functions_of(this),Object.defineProperties(this,{identifier:{configurable:!0,get:function(){return this.identifier_}},element:{configurable:!0,get:function(){return this.element_}},inputElements:{configurable:!0,get:function(){return this.inputElements_.slice()}},contentItem:{configurable:!0,get:function(){return this.contentItem_},set:function(t){this.updateContentItem(t)}},annotations:{configurable:!0,get:function(){return this.getCurrentAnnotations()}},panels:{configurable:!0,get:function(){return this.panels_.slice()},set:function(t){this.panels_=Array.from(t)}},activePanel:{configurable:!0,get:function(){return this.activePanel_},set:function(t){this.updateActivePanel(t)}}}),this.identifier_=t,this.element_=e,this.contentItem_=null,this.inputElements_=Array.from(this.element_.querySelectorAll("input")),this.panels_=[],this.activePanel_=null,this.rateLimitTimeoutID_=null,n&&(this.panels_=Array.from(n.panels||[]),this.panels_&&(this.activePanel_=this.panels_[0]))};e.AnnotationEditor=v,v.prototype.fireDelayed=function(t,e){null!=this.rateLimiterTimeoutID_&&(clearTimeout(this.rateLimiterTimeoutID_),this.rateLimiterTimeoutID_=null),this.rateLimiterTimeoutID_=setTimeout.apply(void 0,u([t,500],c(e),!1))},v.prototype.getCurrentAnnotations=function(){var t,e,n,i,r={};try{for(var o=h(this.panels),a=o.next();!a.done;a=o.next()){var s=a.value,l={};r[s.identifier]=l;try{for(var c=(n=void 0,h(s.fields)),u=c.next();!u.done;u=c.next()){var f=u.value;l[f.identifier]=null,null!=f.elementRef.current?l[f.identifier]=f.elementRef.current.value:console.log("Null elementRef in "+s.identifier+":"+f.identifier+", field_type="+f.type)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r},v.prototype.updateContentItem=function(t){null!=this.contentItem_&&(this.contentItem_.annotations=this.annotations),this.contentItem_=t,this.render()},v.prototype.updateActivePanel=function(t){this.activePanel_=t,this.applyAnnotations(this.annotations),this.render()},v.prototype.fieldChanged=function(t,e){b.getIdentifier(e),this.syncAnnotations()},v.prototype.syncAnnotations=function(){if(null!=this.contentItem){var t=this.annotations;this.fireDelayed(this.applyAnnotations,[t])}},v.prototype.applyAnnotations=function(t){null!=this.contentItem&&(this.contentItem.annotations=t)},v.prototype.renderAnnotationField=function(t,e){var n=this,i=b.getIdentifier(e),r=b.getLabel(e),a=b.getType(e),s=b.getDefaultValue(e);if(null!=this.contentItem){var l=(this.contentItem.annotations||{})[t.identifier]||{};s=l[e.identifier]||s}var c=b.getAttributes(e),u={},h=[];e.elementRef=p.default.createRef();var f=null;r&&(f=p.default.createElement("label",null,r));var d="annotation-editor-field";switch(a){case"textarea":return u=Object.assign(u,c),p.default.createElement("div",{key:i,className:d},f,p.default.createElement("textarea",o({ref:e.elementRef},u,{onChange:function(i){n.fieldChanged(t,e)}}),s));case"checkbox":return(u=Object.assign(u,c)).value=s,p.default.createElement("div",{key:i,className:d},f,p.default.createElement("input",o({ref:e.elementRef,type:"checkbox"},u,{onChange:function(i){n.fieldChanged(t,e)}})));case"radio":return(u=Object.assign(u,c)).value=s,p.default.createElement("div",{key:i,className:d},f,p.default.createElement("input",o({ref:e.elementRef,type:"radio"},u,{onChange:function(i){n.fieldChanged(t,e)}})));case"text":case"number":return u.style=Object.assign({resize:"horizontal",overflow:"hidden",overflowWrap:"break-word",height:"50px",padding:"0.375em 1.25em"},c.style||{}),u=Object.assign(u,c),p.default.createElement("div",{key:i,className:d},f,p.default.createElement("textarea",o({ref:e.elementRef},u,{onChange:function(i){n.fieldChanged(t,e)}}),s));case"choice":return h=(u=Object.assign(u,c)).choices||[],delete u.choices,p.default.createElement("div",{key:i,className:d},f,p.default.createElement(y,{initialValue:s,choices:h,editor:this,panel:t,field:e,attributes:u,elementRef:e.elementRef}));case"telepath_widget":var _=(u=Object.assign(u,c)).widgetFactory?m.default.unpack(u.widgetFactory):null,v=(u.widgetState&&m.default.unpack(u.widgetState),this.identifier+"-"+t.identifier+"-"+i),g=null;return e.placeholderRef=function(t){_.render(t,v,v,s),(g=document.getElementById(v))&&(e.elementRef.current=g)},p.default.createElement("div",{key:i,className:d+" "+(u.classname||"")},f,p.default.createElement("div",{ref:e.placeholderRef}))}return null},v.prototype.classesForPanel=function(t){var e="annotation-editor-panel";return this.activePanel===t&&(e+=" active"),e},v.prototype.renderAnnotationPanel=function(t){var e,n,i=[];try{for(var r=h(_.getFields(t)),o=r.next();!o.done;o=r.next()){var a=o.value;i.push(this.renderAnnotationField(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return p.default.createElement("div",{key:t.identifier,className:this.classesForPanel(t)},i)},v.prototype.renderTabs=function(){var t,e,n=this,i=[],r=function(t){var e=null;t===o.activePanel&&(e="active"),i.push(p.default.createElement("li",{key:t.identifier,className:e,onClick:function(e){n.updateActivePanel(t)}},p.default.createElement("span",null,t.label)))},o=this;try{for(var a=h(this.panels),s=a.next();!s.done;s=a.next())r(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return p.default.createElement("ul",{key:"annotation-editor-tabs",className:"annotation-editor-panel-tabs"},i)},v.prototype.render=function(){var t,e,n=[];if(null!=this.contentItem){n.push(this.renderTabs());try{for(var i=h(this.panels),r=i.next();!r.done;r=i.next()){var o=r.value;n.push(this.renderAnnotationPanel(o))}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}}else n.push(p.default.createElement("div",{key:"annotation-editor-default",className:"annotation-editor-hint"},p.default.createElement("span",null,"Click on an item to edit its annotations")));ReactDOM.render(n,this.element)}},569:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var s=a(n(311)),l=o(n(802)),c=a(n(724)),u=function(){l.bind_functions_of(this),Object.defineProperties(this,{identifier:{configurable:!0,get:function(){return this.identifier_}},steps:{configurable:!0,get:function(){return this.gatherSteps()}},resultsSelector:{configurable:!0,get:function(){return this.resultsSelector_},set:function(t){this.resultsSelector_=t}},searchFormSelector:{configurable:!0,get:function(){return this.searchFormSelector_},set:function(t){this.searchFormSelector_=t}},searchFieldSelector:{configurable:!0,get:function(){return this.searchFieldSelector_},set:function(t){this.searchFieldSelector_=t}}}),this.identifier_="",this.resultsSelector_="#content-chooser-results",this.searchFormSelector_="form.content-chooser-search",this.searchFieldSelector_="#id_q",this.request=null};u.prototype.ajaxifyLinks=function(t,e){(0,s.default)(".listing a",e).on("click",(function(){return t.loadUrl(this.href),!1}));var n=this.fetchResults;(0,s.default)(".pagination a",e).on("click",(function(){return n(t,this.href),!1}))},u.prototype.fetchResults=function(t,e,n){var i=this,r={url:e,success:function(e,n){i.request=null,(0,s.default)(i.resultsSelector).html(e),i.ajaxifyLinks(t,(0,s.default)(i.resultsSelector))},error:function(){request=null}};n&&(r.data=n),this.request=s.default.ajax(r)},u.prototype.search=function(t,e,n){return this.fetchResults(t,n,e.serialize()),!1},u.prototype.gatherSteps=function(){return{presentChooser:this.presentChooser,finalise:this.finalise}},u.prototype.presentChooser=function(t,e){var n=this;this.ajaxifyLinks(t,t.body);var i=(0,s.default)(this.searchFormSelector,t.body),r=i.attr("action");(0,s.default)(this.searchFormSelector,t.body).on("submit",(function(){return n.search(worfklow,i,r)}));var o=(0,s.default)(this.searchFieldSelector);o.on("input",(function(){n.request&&(n.request.abort(),n.request=null),clearTimeout(s.default.data(o[0],"timer"));var e=setTimeout((function(){return n.search(t,i,r)}),200);(0,s.default)(o[0]).data("timer",e)})),t.body[0].querySelectorAll("[data-tabs]").forEach((function(t){return new c.default(t)}))},u.prototype.finalise=function(t,e){var n=window.telepath.unpack(e.result);t.respond("contentWorkflowEnded",n),t.close()},e.default=u},527:(t,e,n)=>{e.__esModule=!0;var i=n(338),r=function(){function t(t,e,n){this.html=t,this.idPattern=e,this.opts=n}return t.prototype.render=function(t,e,n,r){var o=this.html.replace(/__NAME__/g,e).replace(/__ID__/g,n);t.outerHTML=o;var a=new i.ContentChooser(n,this.opts);return void 0!==r&&null!=r?(void 0!==r._type&&null!==r._type&&(r=window.telepath.unpack(r)),a.updateState(r)):a.initialiseState(),a},t}();window.telepath.register("wagtail_content_admin.widgets.ContentChooser",r),window.telepath.register("wagtail_content_admin.widgets.ContentChooserState",i.ContentChooserState),window.telepath.register("wagtail_content_admin.widgets.ContentItem",i.ContentItem),window.telepath.register("wagtail_content_admin.widgets.ContentItemAction",i.ContentItemAction)},338:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0,e.ContentItemAction=e.ContentItem=e.ContentChooserState=e.ContentChooser=void 0,n(357);var l=o(n(802)),c=s(n(569)),u=s(n(362)),h=s(n(363)),f=s(n(533)),d=n(884),p=function(t,e){l.bind_functions_of(this),Object.defineProperties(this,{identifier:{configurable:!0,get:function(){return this.identifier_}},url:{configurable:!0,get:function(){return this.url_},set:function(t){this.url_=t}},title:{configurable:!0,get:function(){return this.title_},set:function(t){this.title_=t}},prompt:{configurable:!0,get:function(){return this.prompt_},set:function(t){this.prompt_=t}},icon:{configurable:!0,get:function(){return this.icon_},set:function(t){this.icon_=t}}}),this.identifier_=t,this.url_="",this.title_="",this.prompt_="",this.icon_="",e&&(this.url_=e.url||"",this.title_=e.title||"",this.prompt_=e.prompt||"",this.icon_=e.icon||"")};e.ContentItemAction=p,p.prototype.renderHTML=function(t,e,n){var i=this,r=null;return t&&(r=t+"-button"),this.url?h.default.createElement("a",{type:"button",className:"button button-small content-item-link",id:r,title:this.title,href:this.url},this.title):h.default.createElement("button",{type:"button",className:"button button-small button--icon text-replace white content-item-action",id:r,title:this.title,onClick:function(t){n(e,i,t)}},h.default.createElement("svg",{className:"icon icon-".concat(this.icon),"aria-hidden":"true"},h.default.createElement("use",{href:"#icon-".concat(this.icon)})),this.title)};var m=function(t,e,n){l.bind_functions_of(this),Object.defineProperties(this,{contentTypeKey:{configurable:!0,get:function(){return this.contentTypeKey_},set:function(t){this.contentTypeKey_=t}},instanceKey:{configurable:!0,get:function(){return this.instanceKey_},set:function(t){this.instanceKey_=t}},uniqueKey:{configurable:!0,get:function(){return this.contentTypeKey.toString()+"-"+this.instanceKey.toString()}},modelVerboseName:{configurable:!0,get:function(){return this.modelVerboseName_},set:function(t){this.modelVerboseName_=t}},title:{configurable:!0,get:function(){return this.title_},set:function(t){this.title_=t}},previewHTML:{configurable:!0,get:function(){return this.previewHTML_},set:function(t){this.previewHTML_=t}},actions:{configurable:!0,get:function(){return this.actions_.slice()},set:function(t){this.actions_=Array.from(t)}},annotations:{configurable:!0,get:function(){return Object.assign({},this.annotations_)},set:function(t){this.annotations_=Object.assign({},t),this.updateInputValue()}},inputElement:{configurable:!0,get:function(){return this.inputElement_},set:function(t){this.inputElement_=t}},asInputValue:{configurable:!0,get:function(){if(this.contentTypeKey&&this.instanceKey){var t="";this.annotations&&(t=":"+JSON.stringify(this.annotations));var e=this.contentTypeKey.toString()+":"+this.instanceKey.toString()+t;return encodeURIComponent(e)}return null}},fromInputValue:{configurable:!0,set:function(t){var e=(t=decodeURIComponent(t)).split(":");this.contentTypeKey=e[0]||"",this.instanceKey=e[1]||"",e.length>2&&(this.annotations=JSON.parse(e[2]))}}}),this.contentTypeKey_=t,this.instanceKey_=e,this.modelVerboseName_="",this.title_="",this.previewHTML_="",this.actions_=[],this.annotations_={},this.inputElement_=null,n&&(this.modelVerboseName_=n.modelVerboseName||"",this.title_=n.title||"",this.previewHTML_=n.previewHTML||"",this.actions_=Array.from(n.actions||[]),this.annotations_=Object.assign({},n.annotations||{}))};e.ContentItem=m,m.prototype.updateInputValue=function(){null!=this.inputElement_&&this.inputElement_.setAttribute("value",this.asInputValue)},m.prototype.addAction=function(t){this.actions_.push(t)},m.prototype.renderAction=function(t,e,n){return h.default.createElement("li",{key:e},t.renderHTML(e,this,n))},m.prototype.renderHTML=function(t,e){var n=this;return h.default.createElement(h.default.Fragment,null,h.default.createElement("ul",{className:"content-item-controls"},e.map((function(e){return n.renderAction(e,"content-item-"+n.uniqueKey+"-"+e.identifier,t)}))),h.default.createElement("div",{className:"content-item-choice",dangerouslySetInnerHTML:{__html:this.previewHTML}}),h.default.createElement("ul",{className:"content-item-actions"},this.actions.map((function(e){return n.renderAction(e,"content-item-"+n.uniqueKey+"-"+e.identifier,t)}))))};var y=function(t,e){l.bind_functions_of(this),Object.defineProperties(this,{items:{configurable:!0,get:function(){return this.items_.slice()},set:function(t){this.items_=Array.from(t)}}}),this.items_=[],t&&(this.items_=Array.from(t))};e.ContentChooserState=y,y.prototype.addItem=function(t){this.items_.push(t)},y.prototype.removeItem=function(t){var e=this.items.indexOf(t);return e<0?null:(this.items_.splice(e,1),t)},y.prototype.moveItemForward=function(t){var e=this.items.indexOf(t);e<0||0===e||(this.items_.splice(e,1),this.items_.splice(e-1,0,t))},y.prototype.moveItemBackward=function(t){var e=this.items.indexOf(t);e<0||e===this.items.length-1||(this.items_.splice(e,1),this.items_.splice(e+1,0,t))};var _=function(t,e){var n,i,r,o,s=this;l.bind_functions_of(this),Object.defineProperties(this,{identifier:{configurable:!0,get:function(){return this.identifier_}},element:{configurable:!0,get:function(){return this.element_}},formElement:{configurable:!0,get:function(){return this.formElement_}},shellElement:{configurable:!0,get:function(){return this.shellElement_}},inputElements:{configurable:!0,get:function(){return this.inputElements_.slice()}},selectionElement:{configurable:!0,get:function(){return this.selectionElement_}},chooseActionElements:{configurable:!0,get:function(){return this.queryChooseActionElements()}},clearActionElements:{configurable:!0,get:function(){return this.queryClearActionElements()}},baseURL:{configurable:!0,get:function(){return this.baseURL_}},defaultItemActions:{configurable:!0,get:function(){return this.defaultItemActions_.slice()}},chooseActionPrompt:{configurable:!0,get:function(){return this.determineChooseActionPrompt()}},value:{configurable:!0,get:function(){return this.state&&this.state.items.length>0}},state:{configurable:!0,get:function(){return this.state_},set:function(t){this.updateState(t)}},maxNumChoices:{configurable:!0,get:function(){return this.maxNumChoices_}},contentTypeFilter:{configurable:!0,get:function(){return this.contentTypeFilter_}},annotationEditor:{configurable:!0,get:function(){return this.annotationEditor_}}}),this.state_=null,this.maxNumChoices_=null,this.identifier_=t,this.element_=document.querySelector("#"+t+"-chooser"),this.baseURL_=this.element_.dataset.chooserUrl;var c=JSON.parse(this.element_.dataset.defaultItemActions);if(this.defaultItemActions_=window.telepath.unpack(c),this.formElement_=document.querySelector("#page-edit-form"),this.formElement_&&this.formElement_.addEventListener("submit",(function(){s.formWillBeSubmitted()}),!1),this.shellElement_=document.querySelector("#"+t+"-shell"),this.inputElements_=Array.from(this.shellElement_.querySelectorAll("input")),this.selectionElement_=this.element_.querySelector(".selection-root"),this.selectionElement_&&this.selectionElement_.addEventListener("click",(function(){s.deselectItems()}),!1),this.lastRenderedInputHTML_=null,this.prompts_={},this.contentTypeFilter_=null,this.annotationEditor_=null,e){if(this.maxNumChoices_=e.maxNumChoices||null,this.prompts_=Object.assign({},e.prompts||{}),e.annotations){var u=this.element_.querySelector(".annotation-editor");this.annotationEditor_=new d.AnnotationEditor(this.identifier_,u,e.annotations)}this.contentTypeFilter_=e.contentTypeFilter||null}var h=this.element_.querySelectorAll(".action-choose");try{for(var f=a(h),p=f.next();!p.done;p=f.next())p.value.addEventListener("click",(function(){s.showItemChooser()}),!1)}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var m=this.element_.querySelectorAll(".action-clear");try{for(var y=a(m),_=y.next();!_.done;_=y.next())_.value.addEventListener("click",(function(){s.clear()}),!1)}catch(t){r={error:t}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}};e.ContentChooser=_,_.prototype.queryChooseActionElements=function(){return this.element_.querySelectorAll(".action-choose")},_.prototype.queryClearActionElements=function(){return this.element_.querySelectorAll(".action-clear")},_.prototype.determineChooseActionPrompt=function(){return this.state_&&this.maxNumChoices&&this.state_.items.length>=this.maxNumChoices?this.prompts_.replace||"Replace":this.prompts_.add||"Add"},_.prototype.formWillBeSubmitted=function(){null!==this.annotationEditor&&this.render()},_.prototype.createState=function(){return new y},_.prototype.createItem=function(t,e,n){return new m(t,e,n)},_.prototype.initialiseState=function(){this.state=this.createState(),this.inputElements.length},_.prototype.handleItemAction=function(t,e,n){if(!(this.state.items.indexOf(t)<0)){var i=!0;switch(e.identifier){case"delete":this.removeItem(t);break;case"move_forward":this.moveItemForward(t);break;case"move_backward":this.moveItemBackward(t);break;case"select":this.selectItem(t);break;default:i=!1}i&&n.stopPropagation(),this.stateChanged(),this.render()}},_.prototype.removeItem=function(t){null!==this.state.removeItem(t)&&this.annotationEditor&&this.annotationEditor.contentItem===t&&(this.annotationEditor.contentItem=null)},_.prototype.moveItemForward=function(t){this.state.moveItemForward(t)},_.prototype.moveItemBackward=function(t){this.state.moveItemBackward(t)},_.prototype.selectItem=function(t){this.annotationEditor&&(this.annotationEditor.contentItem=t,this.stateChanged(),this.render())},_.prototype.deselectItems=function(t){this.annotationEditor&&(this.annotationEditor.contentItem=null,this.stateChanged(),this.render())},_.prototype.classesForItem=function(t){var e="content-item";return this.annotationEditor&&this.annotationEditor.contentItem===t&&(e+=" selected"),e},_.prototype.renderItem=function(t){var e=this;return h.default.createElement("li",{key:t.asInputValue,className:this.classesForItem(t),onClick:function(n){e.selectItem(t)}},t.renderHTML(this.handleItemAction,this.defaultItemActions))},_.prototype.showItemChooser=function(){this.maxNumChoices&&this.state&&this.state.items.length>=this.maxNumChoices||null!==this.contentTypeFilter&&0===this.contentTypeFilter[0].length&&!0===this.contentTypeFilter[1]||this.startWorkflow()},_.prototype.stateChanged=function(){var t,e,n,i;if(this.state_&&0!=this.state_.items.length?this.element.classList.remove("blank"):this.element.classList.add("blank"),this.state_&&this.maxNumChoices&&this.state_.items.length>=this.maxNumChoices){this.element.classList.remove("can-choose");try{for(var r=a(this.chooseActionElements),o=r.next();!o.done;o=r.next())(c=o.value).classList.add("disabled"),c.textContent=this.chooseActionPrompt}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}else{this.element.classList.add("can-choose");try{for(var s=a(this.chooseActionElements),l=s.next();!l.done;l=s.next()){var c;(c=l.value).classList.remove("disabled"),c.textContent=this.chooseActionPrompt}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}}},_.prototype.updateState=function(t,e){void 0===e&&(e=!1),t&&!e&&this.state&&(t.items=this.state.items.concat(t.items)),this.state_=t,this.stateChanged(),this.render()},_.prototype.render=function(){var t,e,n,i,r,o,s=this.state||this.createState(),l="",c=0;try{for(var u=a(s.items),h=u.next();!h.done;h=u.next()){var d=h.value;l+=(y='<input type="hidden" name="__NAME__" value="__VALUE__" id="__ID__">'.replace(/__NAME__/g,this.identifier).replace(/__VALUE__/g,d.asInputValue).replace(/__ID__/g,this.identifier+"_"+c.toString()))+"\n",c+=1}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}if(l!=this.lastRenderedInputHTML_){this.lastRenderedInputHTML_=l,this.shellElement.innerHTML=l,c=0;try{for(var p=a(s.items),m=p.next();!m.done;m=p.next()){d=m.value;var y=this.shellElement.children[c];d.inputElement=y,c+=1}}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}var _=[];try{for(var b=a(s.items),v=b.next();!v.done;v=b.next()){d=v.value;var g=this.renderItem(d);_.push(g)}}catch(t){r={error:t}}finally{try{v&&!v.done&&(o=b.return)&&o.call(b)}finally{if(r)throw r.error}}f.default.render(_,this.selectionElement),this.annotationEditor&&this.annotationEditor.render()},_.prototype.startWorkflow=function(){var t=this;(0,u.default)({url:this.baseURL,onload:(new c.default).steps,responses:{contentWorkflowEnded:function(e){t.state=e}}})},_.prototype.clear=function(){this.state=null},_.prototype.focus=function(){this.element_.querySelector(".action-choose").focus()},window.createContentChooser=function(t,e){var n=new _(t,e);return n.initialiseState(),n}},166:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var r=i(n(569)),o=n(338);n(527),globalThis.wagtail_content_admin={ContentWorkflowHandler:r.default,ContentChooser:o.ContentChooser,ContentChooserState:o.ContentChooserState,ContentItem:o.ContentItem,ContentItemAction:o.ContentItemAction}},724:function(t,e){var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))};e.__esModule=!0;var r=function(){function t(t){this.tabContainer=t,this.tabButtons=this.tabContainer.querySelectorAll('[role="tab"]'),this.tabList=this.tabContainer.querySelector('[role="tablist"]'),this.tabPanels=this.tabContainer.querySelectorAll('[role="tabpanel"]'),this.keydownEventListener=this.keydownEventListener.bind(this),this.animate=this.tabContainer.hasAttribute("data-tabs-animate"),this.disableURL=this.tabContainer.hasAttribute("data-tabs-disable-url"),this.state={activeTabID:"",transition:150,initialPageLoad:!0,css:{animate:"animate-in"},keys:{end:"End",home:"Home",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown"},direction:{ArrowLeft:-1,ArrowRight:1}},this.onComponentLoaded()}return t.prototype.onComponentLoaded=function(){if(this.bindEvents(),this.tabButtons){this.tabButtons.forEach((function(t){t.setAttribute("aria-controls",t.getAttribute("href").replace("#",""))}));var t=i([],n(this.tabButtons),!1).find((function(t){return"true"===t.getAttribute("aria-selected")}));window.location.hash&&!this.disableURL?this.selectTabByURLHash():t?(this.tabPanels.forEach((function(t){t.hidden=!0})),this.selectTab(t)):this.selectFirstTab()}},t.prototype.unSelectActiveTab=function(t){if(t!==this.state.activeTabID&&this.state.activeTabID){var e=this.tabContainer.querySelector("#".concat(this.state.activeTabID));if(e){this.animate?this.animateOut(e):e.hidden=!0;var n=this.tabContainer.querySelector("a[href='#".concat(this.state.activeTabID,"']"));n.setAttribute("aria-selected","false"),n.setAttribute("tabindex","-1")}}},t.prototype.selectTab=function(t){if(t){var e=t.getAttribute("aria-controls");e&&this.unSelectActiveTab(e),this.state.activeTabID=e;var n=this.tabContainer.querySelector('a[href="'.concat(t.getAttribute("href"),'"][role="tab"]'));n&&(n.setAttribute("aria-selected","true"),n.removeAttribute("tabindex")),t.setAttribute("aria-selected","true"),t.removeAttribute("tabindex");var i=this.tabContainer.querySelector("#".concat(e));i&&(this.animate?this.animateIn(i):i.hidden=!1,this.state.initialPageLoad&&setTimeout((function(){window.scrollTo(0,0)}),2*this.state.transition),this.tabList.dispatchEvent(new CustomEvent("switch",{detail:{tab:t.getAttribute("href").replace("#","")}})),document.dispatchEvent(new CustomEvent("tab-changed")),this.disableURL||this.setURLHash(e))}},t.prototype.animateIn=function(t){var e=this;setTimeout((function(){t.hidden=!1,setTimeout((function(){t.classList.add(e.state.css.animate)}),e.state.transition)}),this.state.transition)},t.prototype.animateOut=function(t){t.classList.remove(this.state.css.animate),setTimeout((function(){t.hidden=!0}),this.state.transition)},t.prototype.bindEvents=function(){var t=this;this.tabButtons&&(this.tabButtons.forEach((function(e,n){e.addEventListener("click",(function(n){n.preventDefault(),t.selectTab(e)})),e.addEventListener("focusin",(function(){t.selectTab(e)})),e.addEventListener("keydown",t.keydownEventListener),e.index=n})),window.addEventListener("popstate",(function(e){if(e.state&&e.state.tabContent){var n=t.tabContainer.querySelector('a[href="#'.concat(e.state.tabContent,'"][role="tab"]'));n&&t.selectTab(n)}})))},t.prototype.keydownEventListener=function(t){var e=t.key,n=this.state.keys;switch(e){case n.left:case n.right:this.switchTabOnArrowPress(t);break;case n.end:t.preventDefault(),this.focusLastTab();break;case n.home:t.preventDefault(),this.focusFirstTab()}},t.prototype.selectTabByURLHash=function(){if(window.location.hash){var t=window.location.hash.replace(/[^\w\-#]/g,""),e=this.tabContainer.querySelector('a[href="'.concat(t,'"][role="tab"]'));e?this.selectTab(e):this.selectFirstTab()}},t.prototype.setURLHash=function(t){this.state.initialPageLoad||window.history.state&&window.history.state.tabContent===t||window.history.pushState({tabContent:t},null,"#".concat(t)),this.state.initialPageLoad=!1},t.prototype.switchTabOnArrowPress=function(t){var e=t.key,n=this.state.direction,i=this.state.keys,r=this.tabButtons;if(n[e]){var o=t.target;void 0!==o.index&&(r[o.index+n[e]]?r[o.index+n[e]].focus():e===i.left?this.focusLastTab():e===i.right&&this.focusFirstTab())}},t.prototype.focusFirstTab=function(){0!=this.tabButtons.length&&this.tabButtons[0].focus()},t.prototype.focusLastTab=function(){0!=this.tabButtons.length&&this.tabButtons[this.tabButtons.length-1].focus()},t.prototype.selectFirstTab=function(){0!=this.tabButtons.length&&(this.selectTab(this.tabButtons[0]),this.state.activeTabID=this.tabButtons[0].getAttribute("aria-controls"))},t}();e.default=r},802:(t,e)=>{e.__esModule=!0,e.bind_functions_of=e.function_names_of=void 0;var n=function(t){var e=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(e),i=[];return n.forEach((function(e){"constructor"!==e&&"function"==typeof t[e]&&i.push(e)})),i};e.function_names_of=n,e.bind_functions_of=function(t){var e=Object.getPrototypeOf(t);n(t).forEach((function(n){var i=e[n];t[n]=i.bind(t)}))}},362:t=>{t.exports=ModalWorkflow},363:t=>{t.exports=React},533:t=>{t.exports=ReactDOM},311:t=>{t.exports=jQuery},519:t=>{t.exports=telepath}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(166)})();