import{c as O,o as c,e as T,aE as Pe,r as re,w,aF as Re,aG as W,ax as Ye,N as oe,ca as Xe,cb as Je,bF as m,cc as _e,U as Ie,cd as E,bE as ye,ah as ie,Y as Qe,ce as Ze,bJ as Ne,O as Be,R as ce,cf as et,ag as Me,cg as tt,W as me,bI as H,ch as at,g as l,bh as ke,bi as lt,ci as st,bk as rt,cj as ot,ck as nt,cl as Se,cm as ut,bS as it,bg as dt,cn as ct,bX as Ce,F as ve,bY as mt,au as le,J as vt,G as ht,co as ft,a as Z,M as Y,d as I,cp as pt,ar as he,f as M,t as R,cq as bt,j as d,cr as gt,cs as _t,y as yt,D as Fe,k as z,E as se,aB as kt,q as Le,v as $e,I as St,ct as Ct,_ as Ee,bM as wt,cu as Tt,B as Vt,C as Pt,b9 as Rt,bP as It,b7 as Nt,b8 as Bt,cv as Mt,b2 as ue,b as we,K as Ft,b1 as Lt,b5 as $t,l as Et,aW as At,aC as Dt}from"./admin-e70c111f.js";const zt={name:"PaginationToolbar"};function Ot(e,t,a,u,o,s){return c(),T(Ye,{class:"paginationToolbar codexToolbar",density:"compact",transform:"center bottom"},Pe({_:2},[re(e.$slots,(i,r)=>({name:r,fn:w(h=>[Re(e.$slots,r,W({props:i},h),void 0,!0)])}))]),1024)}const ul=O(zt,[["render",Ot],["__scopeId","data-v-cfa8cce0"]]);const fe=Symbol.for("vuetify:v-slider");function jt(e,t,a){const u=a==="vertical",o=t.getBoundingClientRect(),s="touches"in e?e.touches[0]:e;return u?s.clientY-(o.top+o.height/2):s.clientX-(o.left+o.width/2)}function qt(e,t){return"touches"in e&&e.touches.length?e.touches[0][t]:"changedTouches"in e&&e.changedTouches.length?e.changedTouches[0][t]:e[t]}const Ut=oe({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:e=>typeof e=="boolean"||e==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:e=>typeof e=="boolean"||e==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:e=>["vertical","horizontal"].includes(e)},reverse:Boolean,...Xe(),...Je({elevation:2})},"slider"),xt=e=>{const t=m(()=>parseFloat(e.min)),a=m(()=>parseFloat(e.max)),u=m(()=>+e.step>0?parseFloat(e.step):0),o=m(()=>Math.max(_e(u.value),_e(t.value)));function s(i){if(u.value<=0)return i;const r=Ne(i,t.value,a.value),h=t.value%u.value,v=Math.round((r-h)/u.value)*u.value+h;return parseFloat(Math.min(v,a.value).toFixed(o.value))}return{min:t,max:a,step:u,decimals:o,roundValue:s}},Gt=e=>{let{props:t,steps:a,onSliderStart:u,onSliderMove:o,onSliderEnd:s,getActiveThumb:i}=e;const{isRtl:r}=Ie(),h=E(t,"reverse"),v=m(()=>{let n=r.value?"rtl":"ltr";return t.reverse&&(n=n==="rtl"?"ltr":"rtl"),n}),{min:S,max:V,step:g,decimals:L,roundValue:A}=a,j=m(()=>parseInt(t.thumbSize,10)),G=m(()=>parseInt(t.tickSize,10)),q=m(()=>parseInt(t.trackSize,10)),F=m(()=>(V.value-S.value)/g.value),U=E(t,"disabled"),K=m(()=>t.direction==="vertical"),$=m(()=>t.error||t.disabled?void 0:t.thumbColor??t.color),f=m(()=>t.error||t.disabled?void 0:t.trackColor??t.color),N=m(()=>t.error||t.disabled?void 0:t.trackFillColor??t.color),P=ye(!1),y=ye(0),B=ie(),k=ie();function p(n){var ge;const _=t.direction==="vertical",Ue=_?"top":"left",xe=_?"height":"width",Ge=_?"clientY":"clientX",{[Ue]:Ke,[xe]:He}=(ge=B.value)==null?void 0:ge.$el.getBoundingClientRect(),We=qt(n,Ge);let ne=Math.min(Math.max((We-Ke-y.value)/He,0),1)||0;return(_||v.value==="rtl")&&(ne=1-ne),A(S.value+ne*(V.value-S.value))}const X=n=>{s({value:p(n)}),P.value=!1,y.value=0},J=n=>{k.value=i(n),k.value&&(k.value.focus(),P.value=!0,k.value.contains(n.target)?y.value=jt(n,k.value,t.direction):(y.value=0,o({value:p(n)})),u({value:p(n)}))},x={passive:!0,capture:!0};function b(n){o({value:p(n)})}function C(n){n.stopPropagation(),n.preventDefault(),X(n),window.removeEventListener("mousemove",b,x),window.removeEventListener("mouseup",C)}function D(n){var _;X(n),window.removeEventListener("touchmove",b,x),(_=n.target)==null||_.removeEventListener("touchend",D)}function ee(n){var _;J(n),window.addEventListener("touchmove",b,x),(_=n.target)==null||_.addEventListener("touchend",D,{passive:!1})}function te(n){n.preventDefault(),J(n),window.addEventListener("mousemove",b,x),window.addEventListener("mouseup",C,{passive:!1})}const Q=n=>{const _=(n-S.value)/(V.value-S.value)*100;return Ne(isNaN(_)?0:_,0,100)},ae=E(t,"showTicks"),pe=m(()=>ae.value?t.ticks?Array.isArray(t.ticks)?t.ticks.map(n=>({value:n,position:Q(n),label:n.toString()})):Object.keys(t.ticks).map(n=>({value:parseFloat(n),position:Q(parseFloat(n)),label:t.ticks[n]})):F.value!==1/0?Qe(F.value+1).map(n=>{const _=S.value+n*g.value;return{value:_,position:Q(_)}}):[]:[]),qe=m(()=>pe.value.some(n=>{let{label:_}=n;return!!_})),be={activeThumbRef:k,color:E(t,"color"),decimals:L,disabled:U,direction:E(t,"direction"),elevation:E(t,"elevation"),hasLabels:qe,horizontalDirection:v,isReversed:h,min:S,max:V,mousePressed:P,numTicks:F,onSliderMousedown:te,onSliderTouchstart:ee,parsedTicks:pe,parseMouseMove:p,position:Q,readonly:E(t,"readonly"),rounded:E(t,"rounded"),roundValue:A,showTicks:ae,startOffset:y,step:g,thumbSize:j,thumbColor:$,thumbLabel:E(t,"thumbLabel"),ticks:E(t,"ticks"),tickSize:G,trackColor:f,trackContainerRef:B,trackFillColor:N,trackSize:q,vertical:K};return Ze(fe,be),be},Kt=oe({focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0},...Be()},"v-slider-thumb"),Ht=ce()({name:"VSliderThumb",directives:{Ripple:et},props:Kt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a,emit:u}=t;const o=Me(fe);if(!o)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:i,vertical:r,disabled:h,thumbSize:v,thumbLabel:S,direction:V,readonly:g,elevation:L,isReversed:A,horizontalDirection:j,mousePressed:G,decimals:q}=o,{textColorClasses:F,textColorStyles:U}=tt(s),{pageup:K,pagedown:$,end:f,home:N,left:P,right:y,down:B,up:k}=ot,p=[K,$,f,N,P,y,B,k],X=m(()=>i.value?[1,2,3]:[1,5,10]);function J(b,C){if(!p.includes(b.key))return;b.preventDefault();const D=i.value||.1,ee=(e.max-e.min)/D;if([P,y,B,k].includes(b.key)){const Q=(j.value==="rtl"?[P,k]:[y,k]).includes(b.key)?1:-1,ae=b.shiftKey?2:b.ctrlKey?1:0;C=C+Q*D*X.value[ae]}else if(b.key===N)C=e.min;else if(b.key===f)C=e.max;else{const te=b.key===$?1:-1;C=C-te*D*(ee>100?ee/10:10)}return Math.max(e.min,Math.min(e.max,C))}function x(b){const C=J(b,e.modelValue);C!=null&&u("update:modelValue",C)}return me(()=>{const b=H(r.value||A.value?100-e.position:e.position,"%"),{elevationClasses:C}=at(m(()=>h.value?void 0:L.value));return l("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":e.focused,"v-slider-thumb--pressed":e.focused&&G.value},e.class],style:[{"--v-slider-thumb-position":b,"--v-slider-thumb-size":H(v.value)},e.style],role:"slider",tabindex:h.value?-1:0,"aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.modelValue,"aria-readonly":g.value,"aria-orientation":V.value,onKeydown:g.value?void 0:x},[l("div",{class:["v-slider-thumb__surface",F.value,C.value],style:{...U.value}},null),ke(l("div",{class:["v-slider-thumb__ripple",F.value],style:U.value},null),[[lt("ripple"),e.ripple,null,{circle:!0,center:!0}]]),l(st,{origin:"bottom center"},{default:()=>{var D;return[ke(l("div",{class:"v-slider-thumb__label-container"},[l("div",{class:["v-slider-thumb__label"]},[l("div",null,[((D=a["thumb-label"])==null?void 0:D.call(a,{modelValue:e.modelValue}))??e.modelValue.toFixed(i.value?q.value:1)])])]),[[rt,S.value&&e.focused||S.value==="always"]])]}})])}),{}}});const Wt=oe({start:{type:Number,required:!0},stop:{type:Number,required:!0},...Be()},"v-slider-track"),Yt=ce()({name:"VSliderTrack",props:Wt(),emits:{},setup(e,t){let{slots:a}=t;const u=Me(fe);if(!u)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:o,horizontalDirection:s,parsedTicks:i,rounded:r,showTicks:h,tickSize:v,trackColor:S,trackFillColor:V,trackSize:g,vertical:L,min:A,max:j}=u,{roundedClasses:G}=nt(r),{backgroundColorClasses:q,backgroundColorStyles:F}=Se(V),{backgroundColorClasses:U,backgroundColorStyles:K}=Se(S),$=m(()=>`inset-${L.value?"block-end":"inline-start"}`),f=m(()=>L.value?"height":"width"),N=m(()=>({[$.value]:"0%",[f.value]:"100%"})),P=m(()=>e.stop-e.start),y=m(()=>({[$.value]:H(e.start,"%"),[f.value]:H(P.value,"%")})),B=m(()=>h.value?(L.value?i.value.slice().reverse():i.value).map((p,X)=>{var b;const J=L.value?"bottom":"margin-inline-start",x=p.value!==A.value&&p.value!==j.value?H(p.position,"%"):void 0;return l("div",{key:p.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":p.position>=e.start&&p.position<=e.stop,"v-slider-track__tick--first":p.value===A.value,"v-slider-track__tick--last":p.value===j.value}],style:{[J]:x}},[(p.label||a["tick-label"])&&l("div",{class:"v-slider-track__tick-label"},[((b=a["tick-label"])==null?void 0:b.call(a,{tick:p,index:X}))??p.label])])}):[]);return me(()=>l("div",{class:["v-slider-track",G.value,e.class],style:[{"--v-slider-track-size":H(g.value),"--v-slider-tick-size":H(v.value),direction:L.value?void 0:s.value},e.style]},[l("div",{class:["v-slider-track__background",U.value,{"v-slider-track__background--opacity":!!o.value||!V.value}],style:{...N.value,...K.value}},null),l("div",{class:["v-slider-track__fill",q.value],style:{...y.value,...F.value}},null),h.value&&l("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":h.value==="always"}]},[B.value])])),{}}}),Xt=oe({...ut(),...Ut(),...it(),modelValue:{type:[Number,String],default:0}},"v-slider"),Jt=ce()({name:"VSlider",props:Xt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,start:e=>!0,end:e=>!0},setup(e,t){let{slots:a,emit:u}=t;const o=ie(),{rtlClasses:s}=Ie(),i=xt(e),r=dt(e,"modelValue",void 0,f=>{const N=typeof f=="string"?parseFloat(f):f??i.min.value;return i.roundValue(N)}),{min:h,max:v,mousePressed:S,roundValue:V,onSliderMousedown:g,onSliderTouchstart:L,trackContainerRef:A,position:j,hasLabels:G,readonly:q}=Gt({props:e,steps:i,onSliderStart:()=>{u("start",r.value)},onSliderEnd:f=>{let{value:N}=f;const P=V(N);r.value=P,u("end",P)},onSliderMove:f=>{let{value:N}=f;return r.value=V(N)},getActiveThumb:()=>{var f;return(f=o.value)==null?void 0:f.$el}}),{isFocused:F,focus:U,blur:K}=ct(e),$=m(()=>j(r.value));return me(()=>{const[f,N]=Ce.filterProps(e),P=!!(e.label||a.label||a.prepend);return l(Ce,W({class:["v-slider",{"v-slider--has-labels":!!a["tick-label"]||G.value,"v-slider--focused":F.value,"v-slider--pressed":S.value,"v-slider--disabled":e.disabled},s.value,e.class],style:e.style},f,{focused:F.value}),{...a,prepend:P?y=>{var B,k;return l(ve,null,[((B=a.label)==null?void 0:B.call(a,y))??e.label?l(mt,{id:y.id.value,class:"v-slider__label",text:e.label},null):void 0,(k=a.prepend)==null?void 0:k.call(a,y)])}:void 0,default:y=>{let{id:B,messagesId:k}=y;return l("div",{class:"v-slider__container",onMousedown:q.value?void 0:g,onTouchstartPassive:q.value?void 0:L},[l("input",{id:B.value,name:e.name||B.value,disabled:e.disabled,readonly:e.readonly,tabindex:"-1",value:r.value},null),l(Yt,{ref:A,start:0,stop:$.value},{"tick-label":a["tick-label"]}),l(Ht,{ref:o,"aria-describedby":k.value,focused:F.value,min:h.value,max:v.value,modelValue:r.value,"onUpdate:modelValue":p=>r.value=p,position:$.value,elevation:e.elevation,onFocus:U,onBlur:K},{"thumb-label":a["thumb-label"]})])}})}),{}}}),Qt={name:"PaginationSlider"};function Zt(e,t,a,u,o,s){return c(),T(Jt,W({"thumb-size":"36",class:"paginationSlider",density:"compact","hide-details":"auto",rounded:!0,"show-ticks":"always",step:1,"thumb-label":"always"},e.$attrs),null,16)}const il=O(Qt,[["render",Zt],["__scopeId","data-v-825b160e"]]);const ea={name:"PaginationNavButton"};function ta(e,t,a,u,o,s){return c(),T(le,W({class:"paginationNavButton",height:"100%"},e.$attrs),Pe({_:2},[re(e.$slots,(i,r)=>({name:r,fn:w(h=>[Re(e.$slots,r,W({props:i},h),void 0,!0)])}))]),1040)}const dl=O(ea,[["render",ta],["__scopeId","data-v-852fad11"]]),de=vt.browser.vuetifyNullCode,aa=".None.",Te={value:de,title:aa},la=new Set(["",de,de.toString(),void 0]),sa=function(e,t){let a;return e===void 0?a=e:e instanceof Object?(a={value:e.pk,title:e.name},la.has(a.value)||!a.title?a=Te:t||(a.value=+e.pk)):e===null?a=Te:a={value:e,title:e.toString()},a},ra=function(e,t){return e.title<t.title?-1:e.title>t.title?1:0},oa=function(e,t){return Number.parseFloat(e.title)-Number.parseFloat(t.title)},na=function(e,t,a=!1,u=!1){const o=e||[],s=t&&t.toLowerCase();let i=[];for(const h of o){const v=sa(h,u);v&&(!s||v.title&&v.title.toLowerCase().includes(s))&&i.push(v)}const r=a?oa:ra;return i.sort(r)};const ua={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function ia(e,t,a,u,o,s){return c(),T(ht,W({"aria-label":"loading",class:"codexProgressCircular",indeterminate:a.indeterminate},e.$attrs),null,16,["indeterminate"])}const Ae=O(ua,[["render",ia],["__scopeId","data-v-7bb4cf22"]]),da=(e,t)=>e?`${ft(e)}/cover.webp?${t}`:window.CODEX.MISSING_COVER;const ca={name:"BookCover",props:{group:{type:String,required:!0},childCount:{type:Number,default:1},finished:{type:Boolean},coverPk:{type:Number,required:!0}},data(){return{showPlaceholder:!1}},computed:{...Z(Y,{coverSrc:function(e){return da(this.coverPk,e.page.coversTimestamp)}})},mounted:function(){this.delayPlaceholder()},methods:{delayPlaceholder:function(){setTimeout(()=>{this.showPlaceholder=!0},2e3)}}},ma={class:"bookCover"},va={key:1,class:"childCount"};function ha(e,t,a,u,o,s){return c(),I("div",ma,[l(pt,{src:e.coverSrc,class:"coverImg"},null,8,["src"]),a.finished!==!0?(c(),I("div",{key:0,class:he({unreadFlag:!0,mixedreadFlag:a.finished===null})},null,2)):M("",!0),a.group!=="c"?(c(),I("span",va,R(a.childCount),1)):M("",!0)])}const De=O(ca,[["render",ha],["__scopeId","data-v-9acb5f6a"]]);const fa={name:"MetadataTags",props:{label:{type:String,required:!0},items:{type:Array,default(){return[]}},values:{type:Array,default(){return[]}}},data(){return{mdiFilter:bt}},computed:{...Z(Y,{filterValues:function(e){return e.settings.filters[this.label.toLowerCase()]}}),model(){return na(this.values)}},methods:{chipColor:function(e){return this.filterValues&&this.filterValues.includes(e)?this.$vuetify.theme.current.colors["primary-darken-1"]:""}}},pa={key:0,class:"tags"},ba={class:"label"};function ga(e,t,a,u,o,s){return s.model&&s.model.length>0?(c(),I("div",pa,[l(_t,{value:s.model,multiple:"",class:"chipGroup"},{default:w(()=>[d("div",ba,R(a.label),1),(c(!0),I(ve,null,re(s.model,i=>(c(),T(gt,{key:`${a.label}/${i.value}`,color:s.chipColor(i.value),value:i.value,text:i.title},null,8,["color","value","text"]))),128))]),_:1},8,["value"])])):M("",!0)}const ze=O(fa,[["render",ga],["__scopeId","data-v-80903885"]]);const _a={name:"MetadataTextBox",props:{label:{type:String,required:!0},value:{type:[Object,String,Number,Boolean],default:void 0},link:{type:Boolean,default:!1},group:{type:String,default:""},obj:{type:Object,default:void 0}},data(){return{mdiOpenInNew:yt}},computed:{computedValue(){return this.value!=null&&this.value instanceof Object?this.value.name:this.value},highlight(){var e;return((e=this.obj)==null?void 0:e.group)===this.group},pathArray(){if(this.computedValue)return this.computedValue.split("/")},folderPath(){if(this.pathArray)return this.pathArray.slice(0,-1).join("/")},basePath(){if(this.pathArray)return this.pathArray.at(-1)},groupTo(){const e=Y();if(this.group!=="f"&&!e.settings.show[this.group]||this.group==="f"&&!e.page.adminFlags.folderView)return;let t;if(t=this.obj&&this.obj.group==this.group?this.obj.pk:this.value.pk,!t)return;const a=this.$router.currentRoute.value.params;if(!(a.group===this.group&&+a.pk===t))return{name:"browser",params:{group:this.group,pk:t}}}}},ya={class:"textLabel"},ka={class:"textValue"},Sa=["href"],Ca={key:3,class:"textContent"},wa={key:4,id:"basePath"};function Ta(e,t,a,u,o,s){const i=Fe("router-link");return s.computedValue?(c(),I("div",{key:0,class:he(["text",{highlight:s.highlight}])},[d("div",ya,R(a.label),1),d("div",ka,[s.groupTo&&a.group==="f"?(c(),T(i,{key:0,id:"folderPath",to:s.groupTo,title:"Browse Folder"},{default:w(()=>[z(R(s.folderPath)+"/",1)]),_:1},8,["to"])):s.groupTo?(c(),T(i,{key:1,class:"textContent",to:s.groupTo,title:`Browse ${a.label}`},{default:w(()=>[z(R(s.computedValue),1)]),_:1},8,["to","title"])):a.link?(c(),I("a",{key:2,href:s.computedValue,target:"_blank"},[z(R(s.computedValue)+" ",1),l(se,{size:"small"},{default:w(()=>[z(R(o.mdiOpenInNew),1)]),_:1})],8,Sa)):(c(),I("div",Ca,R(s.computedValue),1)),s.groupTo&&a.group==="f"?(c(),I("span",wa,R(s.basePath),1)):M("",!0)])],2)):M("",!0)}const Oe=O(_a,[["render",Ta],["__scopeId","data-v-7a19eb52"]]);const Va={name:"MetadatacreatorsTable",props:{value:{type:Array,default:void 0}},data(){return{}},computed:{sortedcreators:function(){return this.value?[...this.value].sort(this.creatorsCompare):[]},...Z(Y,{filteredCreators(e){return e.settings.filters.creators}})},methods:{roleName:function(e){return e==="CoverArtist"?"Cover Artist":e},creatorSortable:function(e){const t=e.person.name.split(" ");let a=[];return t&&(a.push(t.slice(-1)),t.length>1&&a.push(t.slice(0,-1))),a.push(e.role.name),a.join(" ")},creatorsCompare:function(e,t){const a=this.creatorSortable(e),u=this.creatorSortable(t);return a<u?-1:a>u?1:0},isFilteredCreator(e){return this.filteredCreators&&this.filteredCreators.includes(e)}}},je=e=>(Le("data-v-f650684d"),e=e(),$e(),e),Pa=je(()=>d("h2",null,"Credits",-1)),Ra={class:"highlight-table"},Ia=je(()=>d("thead",null,[d("tr",null,[d("th",{class:"text-left"},"Role"),d("th",{class:"text-left"},"Person")])],-1)),Na={class:"highlight"};function Ba(e,t,a,u,o,s){return s.sortedcreators&&s.sortedcreators.length>0?(c(),T(kt,{key:0,id:"creatorsTable"},{default:w(()=>[Pa,d("table",Ra,[Ia,d("tbody",null,[(c(!0),I(ve,null,re(s.sortedcreators,i=>(c(),I("tr",{key:i.pk},[d("td",null,R(s.roleName(i.role.name)),1),d("td",{class:he({filteredOn:s.isFilteredCreator(i.person.pk)})},[d("span",Na,R(i.person.name),1)],2)]))),128))])])]),_:1})):M("",!0)}const Ma=O(Va,[["render",Ba],["__scopeId","data-v-f650684d"]]),Fa=({pk:e,page:t,readLtr:a,pageCount:u})=>{if(u){if(t)t=Number(t);else if(a)t=0;else{const o=Number(u)-1;t=Math.max(o,0)}return{name:"reader",params:{pk:e,page:t}}}},Ve=St("metadata",{state:()=>({md:void 0}),actions:{async loadMetadata({group:e,pk:t}){const a=Y();await Ct.getMetadata({group:e,pk:t},a.settings).then(u=>(this.md=u.data,!0)).catch(u=>{console.error(u),this.clearMetadata()})},clearMetadata(){this.md=void 0}}});const La=1160,$a=.05,Ea=250,Aa={name:"MetadataButton",components:{BookCover:De,CloseButton:Ee,MetadatacreatorsTable:Ma,MetadataTags:ze,MetadataText:Oe,PlaceholderLoading:Ae},props:{group:{type:String,required:!0},pk:{type:Number,required:!0},children:{type:Number,default:1}},data(){return{mdiDownload:wt,mdiTagOutline:Tt,dialog:!1,progress:0}},computed:{...Vt(Pt,["isUserAdmin"]),...Z(Y,{twentyFourHourTime:e=>e.settings.twentyFourHourTime}),...Z(Ve,{md:e=>e.md,downloadFileName:e=>{const t=e.md;return e.md.path?t.path.split("/").at(-1):Rt({seriesName:t.series.name,volumeName:t.volume.name,issue:t.issue,issueSuffix:t.issueSuffix})+"."+globalThis.fileType.toLowerCase()}}),...Z(Y,{q:e=>e.settings.q}),downloadURL:function(){return It(this.pk)},isReadButtonShown:function(){return this.group==="c"&&this.$route.name!="reader"},isReadButtonEnabled:function(){return this.$route.name==="browser"&&!!this.readerRoute},readButtonIcon:function(){return this.isReadButtonEnabled?Nt:Bt},readerRoute:function(){return Fa(this.md)},formattedIssue:function(){if(!((this.md.issue===null||this.md.issue===void 0)&&!this.md.issueSuffix))return Mt({issue:this.md.issue,issueSuffix:this.md.issueSuffix})},ltrText:function(){return this.md.readLtr?"Left to Right":"Right to Left"},pages:function(){let e="";if(this.md.page){const a=ue.numberFormat(this.md.page,0);e+=`Read ${a} of `}const t=ue.numberFormat(this.md.pageCount,0);return e+=`${t} pages`,this.md.progress>0&&(e+=` (${Math.round(this.md.progress)}%)`),e},size:function(){return ue.filesize(this.md.size)},fileType:function(){return this.md.fileType||"Unknown"}},watch:{dialog:function(e){e?this.dialogOpened():this.clearMetadata()}},methods:{...we(Ve,["clearMetadata","loadMetadata"]),...we(Ft,["downloadIOSPWAFix"]),dialogOpened:function(){this.loadMetadata({group:this.group,pk:this.pk}),this.startProgress()},startProgress:function(){this.startTime=Date.now(),this.estimatedMS=Math.max($a,this.children/La)*1e3,this.updateProgress()},updateProgress:function(){const e=Date.now()-this.startTime;this.progress=e/this.estimatedMS*100,!(this.progress>=100||this.md)&&setTimeout(()=>{this.updateProgress()},Ea)},formatDateTime:function(e){return Lt(e,this.twentyFourHourTime)},download(){this.downloadIOSPWAFix(this.downloadURL,this.md.filename)}}},Da=e=>(Le("data-v-c8430150"),e=e(),$e(),e),za={id:"metadataHeader"},Oa={id:"metadataBookCoverWrapper"},ja={class:"headerHalfRow"},qa={class:"headerQuarterRow"},Ua={class:"mdSection"},xa={key:0,class:"inlineRow"},Ga={id:"metadataBody"},Ka={class:"mdSection"},Ha={class:"thirdRow"},Wa={class:"mdSection"},Ya={class:"quarterRow"},Xa={class:"lastSmallRow"},Ja={class:"halfRow mdSection"},Qa={class:"mdSection"},Za={class:"mdSection"},el={class:"mdSection"},tl={class:"mdSection"},al={id:"footerLinks"},ll={id:"bottomRightButtons"},sl={key:1,id:"placeholderContainer"},rl=Da(()=>d("div",{id:"placeholderTitle"},"Tags Loading",-1));function ol(e,t,a,u,o,s){const i=Ee,r=Oe,h=De,v=ze,S=Fe("MetadatacreatorsTable"),V=Ae;return c(),T(Dt,{modelValue:o.dialog,"onUpdate:modelValue":t[5]||(t[5]=g=>o.dialog=g),fullscreen:"",transition:"dialog-bottom-transition"},{activator:w(({props:g})=>[l(le,W({"aria-label":"tags",class:"tagButton cardControlButton",icon:"",title:"Tags",variant:"text"},g,{onClick:t[0]||(t[0]=$t(()=>{},["prevent"]))}),{default:w(()=>[l(se,null,{default:w(()=>[z(R(o.mdiTagOutline),1)]),_:1})]),_:2},1040)]),default:w(()=>[e.md?(c(),I("div",{key:0,id:"metadataContainer",onKeyup:t[3]||(t[3]=At(g=>o.dialog=!1,["esc"]))},[d("header",za,[l(i,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[1]||(t[1]=g=>o.dialog=!1)}),e.q?(c(),T(r,{key:0,id:"search",value:e.q,label:"Search Query",highlight:!0},null,8,["value"])):M("",!0),d("div",Oa,[l(h,{id:"bookCover","cover-pk":e.md.coverPk,group:a.group,"child-count":e.md.childCount,finished:e.md.finished},null,8,["cover-pk","group","child-count","finished"]),l(Et,{class:"bookCoverProgress","model-value":e.md.progress,rounded:"","background-color":"inherit",height:"2","aria-label":"% read"},null,8,["model-value"])]),d("div",ja,[l(r,{id:"publisher",value:e.md.publisher,group:"p",label:"Publisher",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(r,{id:"imprint",value:e.md.imprint,group:"i",label:"Imprint",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"])]),l(r,{id:"series",value:e.md.series,label:"Series",group:"s",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),d("div",qa,[l(r,{id:"volume",value:e.md.volume,label:"Volume",group:"v",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(r,{value:e.md.seriesVolumeCount,label:"Volume Count"},null,8,["value"]),l(r,{id:"issue",value:s.formattedIssue,label:"Issue",group:"c",obj:{pk:e.md.id,group:e.md.group}},null,8,["value","obj"]),l(r,{value:e.md.volumeIssueCount,label:"Issue Count"},null,8,["value"])]),d("section",Ua,[l(r,{value:e.md.name,label:"Title"},null,8,["value"]),e.md.year||e.md.month||e.md.day?(c(),I("div",xa,[l(r,{value:e.md.year,label:"Year",class:"datePicker",type:"number"},null,8,["value"]),l(r,{value:e.md.month,label:"Month",class:"datePicker"},null,8,["value"]),l(r,{value:e.md.day,label:"Day",class:"datePicker"},null,8,["value"])])):M("",!0),l(r,{value:e.md.gtin,label:"GTIN"},null,8,["value"]),l(r,{value:e.md.original_format,label:"Original Format"},null,8,["value"])])]),d("div",Ga,[d("section",Ka,[d("div",Ha,[l(r,{value:s.pages,label:"Pages"},null,8,["value"]),l(r,{value:e.md.finished,label:"Finished"},null,8,["value"]),l(r,{value:s.ltrText,label:"Reading Direction"},null,8,["value"])])]),d("section",Wa,[d("div",Ya,[e.md.createdAt?(c(),T(r,{key:0,value:s.formatDateTime(e.md.createdAt),label:"Created at",class:"mtime"},null,8,["value"])):M("",!0),e.md.updatedAt?(c(),T(r,{key:1,value:s.formatDateTime(e.md.updatedAt),label:"Updated at",class:"mtime"},null,8,["value"])):M("",!0),l(r,{value:s.size,label:"Size"},null,8,["value"]),l(r,{value:s.fileType,label:"File Type"},null,8,["value"])]),d("div",Xa,[l(r,{group:"f",value:{pk:e.md.parentFolderPk,name:e.md.path},label:"Path"},null,8,["value"])])]),d("section",Ja,[l(r,{value:e.md.country,label:"Country"},null,8,["value"]),l(r,{value:e.md.language,label:"Language"},null,8,["value"])]),d("section",Qa,[l(r,{value:e.md.communityRating,label:"Community Rating"},null,8,["value"]),l(r,{value:e.md.criticalRating,label:"Critical Rating"},null,8,["value"]),l(r,{value:e.md.ageRating,label:"Age Rating"},null,8,["value"])]),d("section",Za,[l(v,{values:e.md.genres,label:"Genres"},null,8,["values"]),l(v,{values:e.md.characters,label:"Characters"},null,8,["values"]),l(v,{values:e.md.teams,label:"Teams"},null,8,["values"]),l(v,{values:e.md.locations,label:"Locations"},null,8,["values"]),l(v,{values:e.md.seriesGroups,label:"Series Groups"},null,8,["values"]),l(v,{values:e.md.storyArcs,label:"Story Arcs"},null,8,["values"]),l(r,{value:e.md.story_arc_number,label:"Story Arc Number"},null,8,["value"]),l(v,{values:e.md.tags,label:"Tags"},null,8,["values"])]),d("section",el,[l(r,{value:e.md.web,label:"Web Link",link:!0},null,8,["value"]),l(r,{value:e.md.summary,label:"Summary"},null,8,["value"]),l(r,{value:e.md.comments,label:"Comments"},null,8,["value"]),l(r,{value:e.md.notes,label:"Notes"},null,8,["value"]),l(r,{value:e.md.scanInfo,label:"Scan"},null,8,["value"])]),d("section",tl,[l(S,{value:e.md.creators},null,8,["value"])])]),d("footer",al,[a.group==="c"?(c(),T(le,{key:0,id:"downloadButton",title:"Download Comic Archive",onClick:s.download},{default:w(()=>[a.group==="c"?(c(),T(se,{key:0},{default:w(()=>[z(R(o.mdiDownload),1)]),_:1})):M("",!0),z(" Download ")]),_:1},8,["onClick"])):M("",!0),s.isReadButtonShown?(c(),T(le,{key:1,to:s.readerRoute,title:"Read Comic",disabled:!s.isReadButtonEnabled},{default:w(()=>[l(se,null,{default:w(()=>[z(R(s.readButtonIcon),1)]),_:1}),z(" Read ")]),_:1},8,["to","disabled"])):M("",!0),d("span",ll,[l(i,{class:"closeButton",title:"Close Metadata (esc)",size:"x-large",onClick:t[2]||(t[2]=g=>o.dialog=!1)})])])],32)):(c(),I("div",sl,[l(i,{class:"closeButton",title:"Close Metadata (esc)",onClick:t[4]||(t[4]=g=>o.dialog=!1)}),rl,l(V,{"model-value":o.progress,indeterminate:o.progress>=100,class:"placeholder"},null,8,["model-value","indeterminate"])]))]),_:1},8,["modelValue"])}const cl=O(Aa,[["render",ol],["__scopeId","data-v-c8430150"]]);export{Ae as P,dl as _,il as a,ul as b,cl as c,De as d,Fa as g,na as t};
