<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Transform &mdash; repytah 0.1.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Assemble" href="assemble_import.html" />
    <link rel="prev" title="Utilities" href="utilities_import.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/repytah_logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.1.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">Why repytah</a></li>
<li class="toctree-l1"><a class="reference internal" href="recommended_installation.html">Installing from <cite>conda</cite> package-manager or from <cite>pip</cite></a></li>
<li class="toctree-l1"><a class="reference internal" href="general_installation.html">Install from <cite>pip</cite> or <cite>conda</cite></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="utilities_import.html">Utilities</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Transform</a></li>
<li class="toctree-l1"><a class="reference internal" href="assemble_import.html">Assemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="search_import.html">Search</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Implementation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="function_pipeline.html">Function Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">A Quick Start to Use the Package <code class="docutils literal notranslate"><span class="pre">repytah</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="example_vignette.html">Example of Creating Aligned Hierarchies for a Mazurka Score</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">repytah</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Transform</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/transform_import.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-repytah.transform">
<span id="transform"></span><h1>Transform<a class="headerlink" href="#module-repytah.transform" title="Permalink to this heading"></a></h1>
<p>transform.py</p>
<p>This module contains functions that transform matrix inputs into different
forms that are of use in bigger functions where they are called.
These functions focus mainly on overlapping repeated structures and
annotation markers.</p>
<dl class="simple">
<dt>The module contains the following functions:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>remove_overlaps</dt><dd><p>Removes any pairs of repeats with the same length and annotation marker
where at least one pair of repeats overlap in time.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>__create_anno_remove_overlaps</dt><dd><p>Turns rows of repeats into marked rows with annotation markers for the
start indices and zeroes otherwise. After removing the annotations that
have overlaps, the function creates separate arrays for annotations
with overlaps and annotations without overlaps. Finally, the annotation
markers are checked and fixed if necessary.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>__separate_anno_markers</dt><dd><p>Expands vector of non-overlapping repeats into a matrix representation.
The matrix representation is a visual record of where all of the
repeats in a song start and end.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="repytah.transform.remove_overlaps">
<span class="sig-prename descclassname"><span class="pre">repytah.transform.</span></span><span class="sig-name descname"><span class="pre">remove_overlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_length</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#repytah.transform.remove_overlaps" title="Permalink to this definition"></a></dt>
<dd><p>Removes any pairs of repeat length and specific annotation marker
where there exists at least one pair of repeats that overlap in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_mat</strong> (<em>np.ndarray</em><em>[</em><em>int</em><em>]</em>) – List of pairs of repeats with annotations marked. The first two
columns refer to the first repeat or the pair, the second two refer
to the second repeat of the pair, the fifth column refers to the
length of the repeats, and the sixth column contains the annotation
markers.</p></li>
<li><p><strong>song_length</strong> (<em>int</em>) – Number of audio shingles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A tuple (lst_no_overlaps, matrix_no_overlaps, key_no_overlaps,
annotations_no_overlaps, all_overlap_lst). All variables have data type
np.ndarray[int].</p>
<p>lst_no_overlaps is a list of pairs of repeats with
annotations marked where all the repeats of a given length and with a
specific annotation marker do not overlap in time.</p>
<p>matrix_no_overlaps is a matrix representation of lst_no_overlaps with
one row for each group of repeats.</p>
<p>key_no_overlaps is a vector containing the lengths of the repeats
encoded in each row of matrix_no_overlaps.</p>
<p>annotations_no_overlaps is a vector containing the annotation markers of
the repeats encoded in each row of matrix_no_overlaps.</p>
<p>all_overlap_lst is a list of pairs of repeats where for each pair of
repeat length and specific annotation marker, there exists at least one
pair of repeats that do overlap in time.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="repytah.transform.__create_anno_remove_overlaps">
<span class="sig-prename descclassname"><span class="pre">repytah.transform.</span></span><span class="sig-name descname"><span class="pre">__create_anno_remove_overlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k_mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">band_width</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#repytah.transform.__create_anno_remove_overlaps" title="Permalink to this definition"></a></dt>
<dd><p>Turns k_mat into marked rows with annotation markers for the start
indices and zeroes otherwise. After removing the annotations that have
overlaps, the function outputs k_lst_out which only contains rows that
have no overlaps, then takes the annotations that have overlaps from
k_lst_out and puts them in overlap_lst. Lastly, it checks if the proper
sequence of annotation markers was given and fix them if necessary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k_mat</strong> (<em>np.ndarray</em>) – List of pairs of repeats of length 1 with annotations marked.
The first two columns refer to the first repeat of the pair,
the second two refer to the second repeat of the pair, the fifth
column refers to the length of the repeats, and the sixth column
contains the annotation markers.</p></li>
<li><p><strong>song_length</strong> (<em>int</em>) – Number of audio shingles.</p></li>
<li><p><strong>band_width</strong> (<em>int</em>) – Length of repeats encoded in k_mat.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A tuple (pattern_row, k_lst_out, overlap_lst) where all variables have
data type np.ndarray.</p>
<p>pattern_row marks where non-overlapping repeats occur, marking start
indices with annotation markers and 0’s otherwise.</p>
<p>k_lst_out is a list of pairs of repeats of length band_width that
contain no overlapping repeats with annotations marked.</p>
<p>overlap_lst is a list of pairs of repeats of length band_width that
contain overlapping repeats with annotations marked.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="repytah.transform.__separate_anno_markers">
<span class="sig-prename descclassname"><span class="pre">repytah.transform.</span></span><span class="sig-name descname"><span class="pre">__separate_anno_markers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">k_mat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">song_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">band_width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_row</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#repytah.transform.__separate_anno_markers" title="Permalink to this definition"></a></dt>
<dd><p>Expands pattern_row, a row vector that marks where non-overlapping
repeats occur, into a matrix representation or np.array. The dimension of
this array is twice the pairs of repeats by song_length. k_mat provides
a list of annotation markers that is used in separating the repeats of
length band_width into individual rows. Each row will mark the start and
end time steps of a repeat with 1’s and 0’s otherwise. The array is a
visual record of where all of the repeats in a song start and end.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>k_mat</strong> (<em>np.ndarray</em>) – List of pairs of repeats of length band_width with annotations
marked. The first two columns refer to the start and end time
steps of the first repeat of the pair, the second two refer to
the start and end time steps of second repeat of the pair, the
fifth column refers to the length of the repeats, and the sixth
column contains the annotation markers. We will be indexing into
the sixth column to obtain a list of annotation markers.</p></li>
<li><p><strong>song_length</strong> (<em>int</em>) – Number of audio shingles.</p></li>
<li><p><strong>band_width</strong> (<em>int</em>) – Length of repeats encoded in k_mat.</p></li>
<li><p><strong>pattern_row</strong> (<em>np.ndarray</em>) – Row vector of the length of the song that marks where
non-overlapping repeats occur with the repeats’ corresponding
annotation markers and 0’s otherwise.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A tuple (pattern_mat, pattern_key, anno_id_lst) where all variables have
data type np.ndarray.</p>
<p>pattern_mat is a matrix representation where each row contains a group
of repeats marked.</p>
<p>pattern_key is a column vector containing the lengths of the repeats
encoded in each row of pattern_mat.</p>
<p>anno_id_lst is a column vector containing the annotation markers of the
repeats encoded in each row of pattern_mat.</p>
</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="utilities_import.html" class="btn btn-neutral float-left" title="Utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="assemble_import.html" class="btn btn-neutral float-right" title="Assemble" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, repytah development team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>